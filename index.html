<!DOCTYPE html>

<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MYKITA English Training</title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=DM+Mono:wght@300;400&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: #0a0a0a; color: #f0ede8; }
    #root { min-height: 100vh; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script charset="UTF-8">
const {
  useState,
  useRef,
  useEffect,
  useCallback
} = React;
function itemWeight(stat) {
  if (!stat || stat.attempts === 0) return 3;
  const acc = stat.correct / stat.attempts;
  if (acc < 0.5) return 2 + (1 - acc) * 2;
  if (acc < 0.8) return 1.2;
  return 0.3;
}
function weightedPick(items, stats) {
  const weights = items.map((_, i) => itemWeight(stats[i]));
  const total = weights.reduce((a, b) => a + b, 0);
  let r = Math.random() * total;
  for (let i = 0; i < weights.length; i++) {
    r -= weights[i];
    if (r <= 0) return i;
  }
  return items.length - 1;
}
function masteryLevel(stat) {
  if (!stat || stat.attempts === 0) return "new";
  const acc = stat.correct / stat.attempts;
  if (acc >= 0.8 && stat.attempts >= 3) return "mastered";
  if (acc >= 0.5) return "learning";
  return "struggling";
}
const MASTERY_COLOR = {
  new: "#444",
  learning: "#c8a040",
  mastered: "#4a8a4a",
  struggling: "#8a3030"
};
const MASTERY_LABEL = {
  new: "\u672a\u5b66\u7fd2",
  learning: "\u5b66\u7fd2\u4e2d",
  mastered: "\u7fd2\u5f97\u6e08",
  struggling: "\u8981\u5fa9\u7fd2"
};
const VOCAB = [{
  category: "\u63a5\u5ba2\u57fa\u672c",
  words: [{
    en: "in particular",
    jp: "\u7279\u306b\uff0f\u3068\u308a\u308f\u3051",
    usage: "Are you looking for something in particular?",
    note: "\u6f20\u7136\u3068\u3057\u305f\u300c\u4f55\u304b\u304a\u63a2\u3057\u3067\u3059\u304b\u300d\u3088\u308a\u4e01\u5be7\u3067\u81ea\u7136\u306a\u8868\u73fe"
  }, {
    en: "feel free to",
    jp: "\u9060\u616e\u306a\u304f\u301c\u3057\u3066\u304f\u3060\u3055\u3044",
    usage: "Feel free to try on as many frames as you like.",
    note: "\u8a31\u53ef\u3084\u6b53\u8fce\u3092\u4f1d\u3048\u308b\u4e01\u5be7\u306a\u8868\u73fe\u3002\u547d\u4ee4\u5f62\u3067\u306a\u304f\u67d4\u3089\u304b\u304f\u805e\u3053\u3048\u308b"
  }, {
    en: "prescription",
    jp: "\u51e6\u65b9\u7b8b\uff0f\u5ea6\u6570",
    usage: "Are you looking for prescription glasses?",
    note: "\u300c\u5ea6\u5165\u308a\u300d\u3092\u6307\u3059\u91cd\u8981\u5358\u8a9e\u3002\u767a\u97f3: /pr\u026a\u02c8skr\u026ap\u0283\u0259n/"
  }, {
    en: "suit",
    jp: "\u4f3c\u5408\u3046",
    usage: "These frames suit you very well.",
    note: "\u5916\u898b\u306b\u5408\u3046\u3068\u3044\u3046\u610f\u5473\u3002fit\uff08\u30b5\u30a4\u30ba\u304c\u5408\u3046\uff09\u3068\u306f\u5225\u7269"
  }, {
    en: "complements",
    jp: "\u5f15\u304d\u7acb\u3066\u308b\uff0f\u3088\u304f\u5408\u3046",
    usage: "The shape complements your face perfectly.",
    note: "\u300c\u88dc\u5b8c\u3059\u308b\u30fb\u6620\u3048\u308b\u300d\u3068\u3044\u3046\u30cb\u30e5\u30a2\u30f3\u30b9\u3002compliments\uff08\u8912\u3081\u308b\uff09\u3068\u6df7\u540c\u3057\u306a\u3044\u3088\u3046\u6ce8\u610f"
  }, {
    en: "at no extra charge",
    jp: "\u8ffd\u52a0\u6599\u91d1\u306a\u3057\u3067",
    usage: "We can make adjustments at no extra charge.",
    note: "\u7121\u6599\u30b5\u30fc\u30d3\u30b9\u3092\u4f1d\u3048\u308b\u5b9a\u756a\u30d5\u30ec\u30fc\u30ba"
  }, {
    en: "browsing",
    jp: "\u898b\u3066\u56de\u3063\u3066\u3044\u308b",
    usage: "Just browsing? That's absolutely fine.",
    note: "\u8cb7\u3046\u6c17\u304c\u306a\u3055\u305d\u3046\u306a\u5ba2\u3078\u306e\u81ea\u7136\u306a\u58f0\u304b\u3051\u8868\u73fe"
  }, {
    en: "assistance",
    jp: "\u30b5\u30dd\u30fc\u30c8\uff0f\u304a\u624b\u4f1d\u3044",
    usage: "Please let me know if you need any assistance.",
    note: "help\u3088\u308a\u5c11\u3057\u30d5\u30a9\u30fc\u30de\u30eb\u306a\u63a5\u5ba2\u8868\u73fe"
  }, {
    en: "selection",
    jp: "\u54c1\u63c3\u3048\uff0f\u30b3\u30ec\u30af\u30b7\u30e7\u30f3",
    usage: "We have a wide selection of frames.",
    note: "variety\u3088\u308a\u5546\u54c1\u5c55\u958b\u3092\u4f1d\u3048\u308b\u306e\u306b\u9069\u3057\u305f\u8a9e"
  }, {
    en: "recommend",
    jp: "\u304a\u3059\u3059\u3081\u3059\u308b",
    usage: "I'd highly recommend trying the LITE collection.",
    note: "I suggest\u3088\u308a\u7a4d\u6975\u7684\u306a\u304a\u3059\u3059\u3081\u8868\u73fe"
  }]
}, {
  category: "MYKITA\u30d6\u30e9\u30f3\u30c9",
  words: [{
    en: "manufactory",
    jp: "\u30de\u30cb\u30e5\u30d5\u30a1\u30af\u30c8\u30ea\u30fc\uff08\u5de5\u623f\u517c\u5de5\u5834\uff09",
    usage: "Every frame is hand-assembled at their manufactory in Berlin.",
    note: "\u5358\u306a\u308bfactory\u3088\u308a\u8077\u4eba\u7684\u306a\u30cb\u30e5\u30a2\u30f3\u30b9\u3002MYKITA\u304c\u3088\u304f\u4f7f\u3046\u7528\u8a9e"
  }, {
    en: "hand-assembled",
    jp: "\u624b\u7d44\u307f\u3055\u308c\u305f",
    usage: "All frames are hand-assembled by skilled craftsmen.",
    note: "handmade\u3088\u308a\u5de5\u7a0b\u3092\u5177\u4f53\u7684\u306b\u8868\u3059\u3002\u63a5\u5ba2\u3067\u306e\u5dee\u5225\u5316\u30dd\u30a4\u30f3\u30c8"
  }, {
    en: "patented",
    jp: "\u7279\u8a31\u53d6\u5f97\u6e08\u307f\u306e",
    usage: "MYKITA's patented hinge design uses no screws.",
    note: "\u767a\u97f3: /\u02c8p\u00e6t\u0259nt\u026ad/\u3002\u30d6\u30e9\u30f3\u30c9\u306e\u6280\u8853\u7684\u512a\u4f4d\u6027\u3092\u4f1d\u3048\u308b\u91cd\u8981\u8a9e"
  }, {
    en: "hingeless",
    jp: "\u30d2\u30f3\u30b8\u30ec\u30b9\u306e",
    usage: "The hingeless design means no screws, no welding.",
    note: "MYKITA Collection No1\u306e\u6700\u5927\u306e\u7279\u5fb4\u3092\u8868\u3059\u8a9e"
  }, {
    en: "cutting-edge",
    jp: "\u6700\u5148\u7aef\u306e",
    usage: "MYKITA combines cutting-edge engineering with handcraft.",
    note: "\u6280\u8853\u30fb\u9769\u65b0\u6027\u3092\u4f1d\u3048\u308b\u5f62\u5bb9\u8a5e"
  }, {
    en: "craftsmanship",
    jp: "\u8077\u4eba\u6280",
    usage: "The craftsmanship behind each frame is exceptional.",
    note: "\u54c1\u8cea\u3068\u4eba\u306e\u624b\u3092\u5f37\u8abf\u3059\u308b\u91cd\u8981\u8a9e\u3002\u30b9\u30da\u30eb\u306b\u6ce8\u610f"
  }, {
    en: "in-house",
    jp: "\u793e\u5185\u4e00\u8cab\uff0f\u81ea\u793e\u88fd",
    usage: "Every stage of development is done in-house.",
    note: "\u5916\u6ce8\u306a\u3057\u30fb\u4e00\u8cab\u751f\u7523\u3092\u610f\u5473\u3059\u308b\u30ad\u30fc\u30ef\u30fc\u30c9"
  }, {
    en: "independent",
    jp: "\u72ec\u7acb\u7cfb\u306e",
    usage: "MYKITA is an independent eyewear brand.",
    note: "\u5927\u624b\u30b3\u30f3\u30b0\u30ed\u30de\u30ea\u30c3\u30c8\u306b\u5c5e\u3055\u306a\u3044\u3053\u3068\u3092\u30a2\u30d4\u30fc\u30eb\u3059\u308b\u969b\u306b\u4f7f\u3046"
  }, {
    en: "avant-garde",
    jp: "\u524d\u885b\u7684\u306a",
    usage: "The designs are bold and avant-garde.",
    note: "\u767a\u97f3: /\u02cc\u00e6v\u0252\u0303\u02c8\u0261\u0251\u02d0d/\u3002\u30a2\u30fc\u30c8\u7cfb\u306e\u611f\u5ea6\u304c\u9ad8\u3044\u5ba2\u3078\u306e\u8868\u73fe\u3068\u3057\u3066\u52b9\u679c\u7684"
  }, {
    en: "distinctive",
    jp: "\u72ec\u7279\u306e\uff0f\u500b\u6027\u7684\u306a",
    usage: "MYKITA has a very distinctive aesthetic.",
    note: "unique\u3088\u308a\u300c\u969b\u7acb\u3063\u305f\u7279\u5fb4\u304c\u3042\u308b\u300d\u3068\u3044\u3046\u30cb\u30e5\u30a2\u30f3\u30b9"
  }]
}, {
  category: "\u7d20\u6750\u30fb\u6280\u8853",
  words: [{
    en: "stainless steel",
    jp: "\u30b9\u30c6\u30f3\u30ec\u30b9\u92fc",
    usage: "Collection No1 is made from stainless steel.",
    note: "\u9306\u3073\u306a\u3044\u30fb\u8efd\u3044\u30fb\u8010\u4e45\u6027\u304c\u9ad8\u3044\u3053\u3068\u3082\u5408\u308f\u305b\u3066\u8aac\u660e\u3067\u304d\u308b\u3068\u826f\u3044"
  }, {
    en: "acetate",
    jp: "\u30a2\u30bb\u30c6\u30fc\u30c8\uff08\u7d20\u6750\uff09",
    usage: "The acetate collection features bold colors.",
    note: "\u767a\u97f3: /\u02c8\u00e6s\u026ate\u026at/\u3002\u30d7\u30e9\u30b9\u30c1\u30c3\u30af\u3088\u308a\u30ea\u30c3\u30c1\u306a\u7d20\u6750\u611f\u3092\u4f1d\u3048\u3089\u308c\u308b"
  }, {
    en: "laser sintering",
    jp: "\u30ec\u30fc\u30b6\u30fc\u713c\u7d50\uff08\u9020\u5f62\u6280\u8853\uff09",
    usage: "MYLON frames use laser sintering technology.",
    note: "\u822a\u7a7a\u5b87\u5b99\u5de5\u5b66\u3067\u4f7f\u308f\u308c\u308b\u5148\u7aef\u6280\u8853\u3002\u304a\u5ba2\u69d8\u3078\u306e\u5370\u8c61\u5ea6\u304c\u9ad8\u3044"
  }, {
    en: "thermally adaptive",
    jp: "\u71b1\u9069\u5fdc\u6027\u306e",
    usage: "MYLON is a thermally adaptive material.",
    note: "\u4f53\u6e29\u3067\u5c11\u3057\u5909\u5f62\u3057\u9854\u306b\u30d5\u30a3\u30c3\u30c8\u3059\u308b\u3068\u3044\u3046\u610f\u5473"
  }, {
    en: "ultra-lightweight",
    jp: "\u8d85\u8efd\u91cf\u306e",
    usage: "The LITE collection is ultra-lightweight.",
    note: "very light\u3088\u308a\u63a5\u5ba2\u3067\u306f\u5370\u8c61\u7684"
  }, {
    en: "zero-waste",
    jp: "\u5ec3\u6750\u30bc\u30ed\u306e",
    usage: "The MYLON production process is zero-waste.",
    note: "\u30b5\u30b9\u30c6\u30ca\u30d3\u30ea\u30c6\u30a3\u3092\u6c17\u306b\u3059\u308b\u304a\u5ba2\u69d8\u3078\u306e\u8a34\u6c42\u30dd\u30a4\u30f3\u30c8"
  }, {
    en: "polyamide",
    jp: "\u30dd\u30ea\u30a2\u30df\u30c9\uff08\u7d20\u6750\uff09",
    usage: "MYLON is made from polyamide powder.",
    note: "MYLON\u306e\u539f\u6599\u3002\u30ca\u30a4\u30ed\u30f3\u306e\u4e00\u7a2e\u3067\u8efd\u304f\u3066\u5f37\u3044"
  }, {
    en: "sheet metal",
    jp: "\u677f\u91d1",
    usage: "Frames are cut from thin sheet metal.",
    note: "No1\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u88fd\u6cd5\u3092\u8aac\u660e\u3059\u308b\u969b\u306e\u91cd\u8981\u8a9e"
  }, {
    en: "coil spring hinge",
    jp: "\u30b3\u30a4\u30eb\u30b9\u30d7\u30ea\u30f3\u30b0\u30d2\u30f3\u30b8",
    usage: "The coil spring hinge is MYKITA's signature detail.",
    note: "MYKITA\u306e\u30b9\u30d1\u30a4\u30e9\u30eb\u30d2\u30f3\u30b8\u3092\u6307\u3059\u5225\u306e\u8a00\u3044\u65b9"
  }, {
    en: "durable",
    jp: "\u8010\u4e45\u6027\u304c\u9ad8\u3044",
    usage: "The frames are incredibly durable.",
    note: "sturdy\uff08\u9811\u4e08\uff09\u3088\u308a\u3082\u4e0a\u54c1\u306a\u30cb\u30e5\u30a2\u30f3\u30b9"
  }]
}, {
  category: "\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0",
  words: [{
    en: "bridge",
    jp: "\u9f3b\u6881\uff08\u9f3b\u306e\u4ed8\u3051\u6839\uff09",
    usage: "How does that feel on the bridge of your nose?",
    note: "\u773c\u93e1\u306e\u9f3b\u5f53\u3066\u90e8\u5206\u3002nose pad\u306f\u5225\u306e\u30d1\u30fc\u30c4"
  }, {
    en: "temple",
    jp: "\u30c6\u30f3\u30d7\u30eb\uff08\u3064\u308b\uff09",
    usage: "The spiral hinge is visible on the temple.",
    note: "\u30d5\u30ec\u30fc\u30e0\u306e\u8033\u306b\u304b\u304b\u308b\u90e8\u5206\u3002\u773c\u93e1\u5c02\u9580\u7528\u8a9e\u3068\u3057\u3066\u5fc5\u9808"
  }, {
    en: "adjust / adjustments",
    jp: "\u8abf\u6574\u3059\u308b\uff0f\u8abf\u6574",
    usage: "We can make adjustments to ensure a perfect fit.",
    note: "\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\u8abf\u6574\u306e\u3053\u3068\u3002fix\u3088\u308a\u5c02\u9580\u7684\u306b\u805e\u3053\u3048\u308b"
  }, {
    en: "fit / a perfect fit",
    jp: "\u30d5\u30a3\u30c3\u30c8\u611f\uff0f\u3074\u3063\u305f\u308a\u5408\u3046",
    usage: "These frames should give you a perfect fit.",
    note: "\u540d\u8a5e\u3068\u3057\u3066\u306efit\u306f\u300c\u5408\u3044\u5177\u5408\u300d"
  }, {
    en: "wearer",
    jp: "\u88c5\u7740\u8005\uff0f\u304b\u3051\u308b\u4eba",
    usage: "The frame adapts to the wearer's face.",
    note: "\u4e09\u4eba\u79f0\u3067\u304a\u5ba2\u69d8\u306b\u8a00\u53ca\u3059\u308b\u969b\u306b\u4fbf\u5229"
  }, {
    en: "nose pad",
    jp: "\u30ce\u30fc\u30ba\u30d1\u30c3\u30c9",
    usage: "We can adjust the nose pads for comfort.",
    note: "\u9f3b\u5f53\u3066\u306e\u3053\u3068\u3002\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\u8abf\u6574\u3067\u983b\u51fa\u3059\u308b\u8a9e"
  }, {
    en: "frame width",
    jp: "\u30d5\u30ec\u30fc\u30e0\u5e45",
    usage: "This frame width suits your face shape well.",
    note: "\u9854\u306e\u5e45\u306b\u5408\u308f\u305b\u305f\u30b5\u30a4\u30ba\u8aac\u660e\u306b\u4f7f\u3046"
  }, {
    en: "pupillary distance",
    jp: "\u77b3\u5b54\u9593\u8ddd\u96e2\uff08PD\u5024\uff09",
    usage: "We'll need to measure your pupillary distance.",
    note: "\u7565\u3057\u3066PD\u3002\u30ec\u30f3\u30ba\u3092\u4f5c\u308b\u969b\u306b\u5fc5\u9808\u306e\u6e2c\u5b9a\u9805\u76ee"
  }]
}, {
  category: "\u4fa1\u683c\u30fb\u4fa1\u5024\u8a34\u6c42",
  words: [{
    en: "price point",
    jp: "\u4fa1\u683c\u5e2f",
    usage: "The price point reflects the handmade quality.",
    note: "price\u3088\u308a\u67d4\u3089\u304b\u304f\u805e\u3053\u3048\u308b\u3002\u5024\u6bb5\u3092\u76f4\u63a5\u8a00\u308f\u305a\u306b\u8a71\u984c\u306b\u3059\u308b\u306e\u306b\u4fbf\u5229"
  }, {
    en: "reflects",
    jp: "\u53cd\u6620\u3057\u3066\u3044\u308b",
    usage: "This price reflects the craftsmanship involved.",
    note: "\u300c\u4fa1\u683c\u306b\u306f\u3061\u3083\u3093\u3068\u3057\u305f\u7406\u7531\u304c\u3042\u308b\u300d\u3068\u3044\u3046\u30cb\u30e5\u30a2\u30f3\u30b9\u3092\u81ea\u7136\u306b\u4f1d\u3048\u308b\u52d5\u8a5e"
  }, {
    en: "long-term investment",
    jp: "\u9577\u671f\u7684\u306a\u6295\u8cc7",
    usage: "Many customers see MYKITA as a long-term investment.",
    note: "\u9ad8\u4fa1\u683c\u5e2f\u5546\u54c1\u306e\u4fa1\u5024\u3092\u8aac\u660e\u3059\u308b\u6700\u91cd\u8981\u30d5\u30ec\u30fc\u30ba"
  }, {
    en: "built to last",
    jp: "\u9577\u304f\u4f7f\u3048\u308b\u3088\u3046\u306b\u4f5c\u3089\u308c\u3066\u3044\u308b",
    usage: "These frames are built to last many years.",
    note: "\u8010\u4e45\u6027\u3068\u4fa1\u5024\u3092\u540c\u6642\u306b\u4f1d\u3048\u308b\u6163\u7528\u8868\u73fe"
  }, {
    en: "price range",
    jp: "\u4fa1\u683c\u5e2f",
    usage: "I can show you something in a different price range.",
    note: "\u3088\u308a\u4f4e\u4fa1\u683c\u306e\u5546\u54c1\u3078\u6848\u5185\u3059\u308b\u3068\u304d\u306e\u81ea\u7136\u306a\u8a00\u3044\u56de\u3057"
  }, {
    en: "worth every penny",
    jp: "\u5341\u5206\u306a\u4fa1\u5024\u304c\u3042\u308b",
    usage: "Customers often say these frames are worth every penny.",
    note: "\u6163\u7528\u8868\u73fe\u3002\u6587\u5b57\u901a\u308a\u306b\u306f\u300c\u4e00\u5186\u306e\u4fa1\u5024\u3082\u3042\u308b\u300d"
  }, {
    en: "value for money",
    jp: "\u30b3\u30b9\u30c8\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9",
    usage: "The LITE collection offers excellent value for money.",
    note: "\u4fa1\u683c\u306b\u898b\u5408\u3063\u305f\u4fa1\u5024\u304c\u3042\u308b\u3053\u3068\u3092\u4f1d\u3048\u308b\u82f1\u56fd\u82f1\u8a9e\u7684\u8868\u73fe"
  }, {
    en: "premium",
    jp: "\u30d7\u30ec\u30df\u30a2\u30e0\uff0f\u9ad8\u54c1\u8cea",
    usage: "MYKITA is positioned as a premium eyewear brand.",
    note: "luxury\u3088\u308a\u5c11\u3057\u89aa\u3057\u307f\u3084\u3059\u304f\u3001\u54c1\u8cea\u306e\u9ad8\u3055\u3092\u793a\u3059\u5f62\u5bb9\u8a5e"
  }]
}];
const SHADOWING_LESSONS = [{
  category: "Welcome & Opening",
  phrases: [{
    en: "Welcome to our store. Are you looking for something in particular today?",
    jp: "\u3044\u3089\u3063\u3057\u3083\u3044\u307e\u305b\u3002\u672c\u65e5\u306f\u4f55\u304b\u304a\u63a2\u3057\u3067\u3057\u3087\u3046\u304b\uff1f"
  }, {
    en: "Feel free to take your time and try on as many frames as you like.",
    jp: "\u3054\u3086\u3063\u304f\u308a\u3001\u3069\u3046\u305e\u304a\u597d\u304d\u306a\u3060\u3051\u304b\u3051\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002"
  }, {
    en: "Are you looking for prescription glasses or sunglasses today?",
    jp: "\u672c\u65e5\u306f\u5ea6\u5165\u308a\u30e1\u30ac\u30cd\u3092\u304a\u63a2\u3057\u3067\u3059\u304b\u3001\u305d\u308c\u3068\u3082\u30b5\u30f3\u30b0\u30e9\u30b9\u3067\u3059\u304b\uff1f"
  }, {
    en: "Is this your first time visiting our store?",
    jp: "\u5f53\u5e97\u3078\u306e\u3054\u6765\u5e97\u306f\u521d\u3081\u3066\u3067\u3059\u304b\uff1f"
  }, {
    en: "Can I help you find something, or would you prefer to browse on your own?",
    jp: "\u4f55\u304b\u304a\u63a2\u3057\u306e\u3082\u306e\u304c\u3054\u3056\u3044\u307e\u3059\u304b\uff1f\u305d\u308c\u3068\u3082\u307e\u305a\u3054\u81ea\u5206\u3067\u3054\u89a7\u306b\u306a\u308a\u307e\u3059\u304b\uff1f"
  }]
}, {
  category: "Introducing MYKITA",
  phrases: [{
    en: "These are from MYKITA \u2014 a German eyewear brand founded in Berlin in 2003.",
    jp: "\u3053\u3061\u3089\u306fMYKITA\u3068\u3044\u3046\u30d6\u30e9\u30f3\u30c9\u3067\u30012003\u5e74\u306b\u30d9\u30eb\u30ea\u30f3\u3067\u5275\u696d\u3057\u305f\u30c9\u30a4\u30c4\u306e\u30a2\u30a4\u30a6\u30a7\u30a2\u30d6\u30e9\u30f3\u30c9\u3067\u3059\u3002"
  }, {
    en: "What makes MYKITA special is that every frame is hand-assembled at their manufactory in Berlin.",
    jp: "MYKITA\u306e\u7279\u5225\u306a\u3068\u3053\u308d\u306f\u3001\u5168\u3066\u306e\u30d5\u30ec\u30fc\u30e0\u304c\u30d9\u30eb\u30ea\u30f3\u306e\u30de\u30cb\u30e5\u30d5\u30a1\u30af\u30c8\u30ea\u30fc\u3067\u624b\u7d44\u307f\u3055\u308c\u3066\u3044\u308b\u3068\u3053\u308d\u3067\u3059\u3002"
  }, {
    en: "MYKITA combines cutting-edge engineering with traditional craftsmanship.",
    jp: "MYKITA\u306f\u6700\u5148\u7aef\u306e\u30a8\u30f3\u30b8\u30cb\u30a2\u30ea\u30f3\u30b0\u3068\u4f1d\u7d71\u7684\u306a\u8077\u4eba\u6280\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u3044\u307e\u3059\u3002"
  }, {
    en: "Unlike most eyewear brands, MYKITA does everything in-house \u2014 from design to production.",
    jp: "\u591a\u304f\u306e\u30a2\u30a4\u30a6\u30a7\u30a2\u30d6\u30e9\u30f3\u30c9\u3068\u7570\u306a\u308a\u3001MYKITA\u306f\u30c7\u30b6\u30a4\u30f3\u304b\u3089\u88fd\u9020\u307e\u3067\u5168\u3066\u3092\u81ea\u793e\u5185\u3067\u884c\u3063\u3066\u3044\u307e\u3059\u3002"
  }, {
    en: "MYKITA is an independent brand \u2014 they're not owned by any of the major eyewear groups.",
    jp: "MYKITA\u306f\u72ec\u7acb\u7cfb\u30d6\u30e9\u30f3\u30c9\u3067\u3001\u5927\u624b\u30a2\u30a4\u30a6\u30a7\u30a2\u30b0\u30eb\u30fc\u30d7\u306b\u306f\u5c5e\u3057\u3066\u3044\u307e\u305b\u3093\u3002"
  }]
}, {
  category: "Explaining the Hinge",
  phrases: [{
    en: "Have you noticed the spiral hinge on the temple? That's MYKITA's patented design \u2014 no screws, no welding.",
    jp: "\u30c6\u30f3\u30d7\u30eb\u306e\u30b9\u30d1\u30a4\u30e9\u30eb\u30d2\u30f3\u30b8\u306b\u304a\u6c17\u3065\u304d\u3067\u3059\u304b\uff1f\u3053\u308c\u304cMYKITA\u306e\u7279\u8a31\u30c7\u30b6\u30a4\u30f3\u3067\u3001\u30cd\u30b8\u3082\u6eb6\u63a5\u3082\u4f7f\u3063\u3066\u3044\u307e\u305b\u3093\u3002"
  }, {
    en: "You can actually hear and feel a small click when you close the frame.",
    jp: "\u30d5\u30ec\u30fc\u30e0\u3092\u9589\u3058\u308b\u3068\u5c0f\u3055\u306a\u30af\u30ea\u30c3\u30af\u611f\u304c\u3042\u308a\u307e\u3059\u3002"
  }, {
    en: "The frames are incredibly durable \u2014 you can flex the temples almost flat without damage.",
    jp: "\u30d5\u30ec\u30fc\u30e0\u306f\u975e\u5e38\u306b\u8010\u4e45\u6027\u304c\u9ad8\u304f\u3001\u30c6\u30f3\u30d7\u30eb\u3092\u307b\u307c\u5e73\u3089\u306b\u306a\u308b\u307e\u3067\u66f2\u3052\u3066\u3082\u5927\u4e08\u592b\u3067\u3059\u3002"
  }, {
    en: "The hinge is made from coiled steel \u2014 it acts like a spring to keep the temples in place.",
    jp: "\u30d2\u30f3\u30b8\u306f\u5dfb\u3044\u305f\u92fc\u9244\u3067\u3067\u304d\u3066\u304a\u308a\u3001\u30d0\u30cd\u306e\u3088\u3046\u306b\u30c6\u30f3\u30d7\u30eb\u3092\u6240\u5b9a\u306e\u4f4d\u7f6e\u306b\u56fa\u5b9a\u3057\u307e\u3059\u3002"
  }, {
    en: "Because there are no screws, there's nothing to come loose over time.",
    jp: "\u30cd\u30b8\u304c\u306a\u3044\u306e\u3067\u3001\u7d4c\u5e74\u3067\u7de9\u3093\u3067\u304f\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u305b\u3093\u3002"
  }]
}, {
  category: "Discussing Materials",
  phrases: [{
    en: "This is from the LITE collection \u2014 one of the lightest metal frames we carry, made of just three components.",
    jp: "\u3053\u3061\u3089\u306fLITE\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3067\u3001\u5f53\u5e97\u3067\u6700\u3082\u8efd\u3044\u30e1\u30bf\u30eb\u30d5\u30ec\u30fc\u30e0\u306e\u4e00\u3064\u3067\u3059\u3002\u308f\u305a\u304b3\u30d1\u30fc\u30c4\u3067\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002"
  }, {
    en: "The MYLON frames are made using laser sintering \u2014 a technology normally used in aerospace engineering.",
    jp: "MYLON\u30d5\u30ec\u30fc\u30e0\u306f\u30ec\u30fc\u30b6\u30fc\u713c\u7d50\u3068\u3044\u3046\u3001\u901a\u5e38\u822a\u7a7a\u5b87\u5b99\u5de5\u5b66\u3067\u4f7f\u308f\u308c\u308b\u6280\u8853\u3067\u4f5c\u3089\u308c\u3066\u3044\u307e\u3059\u3002"
  }, {
    en: "The acetate in this collection is particularly rich \u2014 you can see the depth in the color.",
    jp: "\u3053\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u30a2\u30bb\u30c6\u30fc\u30c8\u306f\u7279\u306b\u6df1\u307f\u304c\u3042\u308a\u3001\u8272\u306e\u5965\u884c\u304d\u304c\u3088\u304f\u5206\u304b\u308a\u307e\u3059\u3002"
  }, {
    en: "MYLON is a thermally adaptive material, so it gently molds to the shape of your face.",
    jp: "MYLON\u306f\u71b1\u9069\u5fdc\u7d20\u6750\u306a\u306e\u3067\u3001\u9854\u306e\u5f62\u306b\u3084\u3055\u3057\u304f\u306a\u3058\u3093\u3067\u3044\u304d\u307e\u3059\u3002"
  }, {
    en: "The stainless steel is cut from flat sheet metal \u2014 almost like origami \u2014 then shaped entirely by hand.",
    jp: "\u30b9\u30c6\u30f3\u30ec\u30b9\u306f\u5e73\u3089\u306a\u677f\u91d1\u304b\u3089\u5207\u308a\u51fa\u3055\u308c\u307e\u3059\u3002\u307b\u3068\u3093\u3069\u6298\u308a\u7d19\u306e\u3088\u3046\u306b\u3001\u305d\u3057\u3066\u5168\u3066\u624b\u3067\u5f62\u4f5c\u3089\u308c\u307e\u3059\u3002"
  }]
}, {
  category: "Trying On & Fitting",
  phrases: [{
    en: "Would you like to try them on? The mirror is right here.",
    jp: "\u304b\u3051\u3066\u307f\u307e\u3059\u304b\uff1f\u93e1\u306f\u3053\u3061\u3089\u306b\u3054\u3056\u3044\u307e\u3059\u3002"
  }, {
    en: "How does that feel on the bridge of your nose?",
    jp: "\u9f3b\u306e\u4e0a\u306e\u5f53\u305f\u308a\u5177\u5408\u306f\u3044\u304b\u304c\u3067\u3059\u304b\uff1f"
  }, {
    en: "These frames suit you very well \u2014 the shape complements your face perfectly.",
    jp: "\u3053\u306e\u30d5\u30ec\u30fc\u30e0\u306f\u3068\u3066\u3082\u3088\u304f\u304a\u4f3c\u5408\u3044\u3067\u3059\u3002\u5f62\u304c\u304a\u9854\u306b\u3074\u3063\u305f\u308a\u3067\u3059\u3002"
  }, {
    en: "We can make adjustments to ensure a perfect fit \u2014 at no extra charge.",
    jp: "\u5b8c\u74a7\u306a\u30d5\u30a3\u30c3\u30c8\u611f\u306b\u306a\u308b\u3088\u3046\u306b\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\u8abf\u6574\u304c\u53ef\u80fd\u3067\u3059\u3002\u8ffd\u52a0\u6599\u91d1\u306f\u304b\u304b\u308a\u307e\u305b\u3093\u3002"
  }, {
    en: "Are the temples sitting comfortably behind your ears?",
    jp: "\u30c6\u30f3\u30d7\u30eb\u306f\u8033\u306e\u5f8c\u308d\u306b\u5feb\u9069\u306b\u306e\u3063\u3066\u3044\u307e\u3059\u304b\uff1f"
  }, {
    en: "We can bend the temples slightly to improve the fit around your ears.",
    jp: "\u8033\u307e\u308f\u308a\u306e\u30d5\u30a3\u30c3\u30c8\u611f\u3092\u826f\u304f\u3059\u308b\u305f\u3081\u306b\u3001\u30c6\u30f3\u30d7\u30eb\u3092\u5c11\u3057\u66f2\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"
  }]
}, {
  category: "Handling Objections",
  phrases: [{
    en: "I understand \u2014 the price point reflects the handmade quality and the engineering behind each frame.",
    jp: "\u304a\u3063\u3057\u3083\u308b\u901a\u308a\u3067\u3059\u306d\u3002\u3053\u306e\u4fa1\u683c\u306f\u3001\u5404\u30d5\u30ec\u30fc\u30e0\u306e\u624b\u4f5c\u308a\u306e\u54c1\u8cea\u3068\u30a8\u30f3\u30b8\u30cb\u30a2\u30ea\u30f3\u30b0\u3092\u53cd\u6620\u3057\u3066\u3044\u307e\u3059\u3002"
  }, {
    en: "MYKITA frames are built to last many years \u2014 many customers consider them a long-term investment.",
    jp: "MYKITA\u30d5\u30ec\u30fc\u30e0\u306f\u4f55\u5e74\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u4f5c\u3089\u308c\u3066\u304a\u308a\u3001\u591a\u304f\u306e\u304a\u5ba2\u69d8\u304c\u9577\u671f\u7684\u306a\u6295\u8cc7\u3068\u3057\u3066\u8003\u3048\u3066\u3044\u3089\u3063\u3057\u3083\u3044\u307e\u3059\u3002"
  }, {
    en: "If you'd like, I can show you something in a similar style at a different price range.",
    jp: "\u3054\u5e0c\u671b\u3067\u3057\u305f\u3089\u3001\u540c\u3058\u3088\u3046\u306a\u30b9\u30bf\u30a4\u30eb\u3067\u7570\u306a\u308b\u4fa1\u683c\u5e2f\u306e\u3082\u306e\u3092\u3054\u89a7\u3044\u305f\u3060\u3051\u307e\u3059\u3002"
  }, {
    en: "Customers who invest in MYKITA tend to come back again and again \u2014 the quality really speaks for itself.",
    jp: "MYKITA\u306b\u6295\u8cc7\u3055\u308c\u305f\u304a\u5ba2\u69d8\u306f\u4f55\u5ea6\u3082\u3054\u6765\u5e97\u3055\u308c\u307e\u3059\u3002\u54c1\u8cea\u304c\u81ea\u305a\u3068\u8a9e\u3063\u3066\u3044\u307e\u3059\u306d\u3002"
  }, {
    en: "Because there are no screws, the maintenance cost over time is much lower than with standard frames.",
    jp: "\u30cd\u30b8\u304c\u306a\u3044\u305f\u3081\u3001\u9577\u671f\u7684\u306a\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30b3\u30b9\u30c8\u306f\u901a\u5e38\u306e\u30d5\u30ec\u30fc\u30e0\u3088\u308a\u5927\u5e45\u306b\u4f4e\u304f\u306a\u308a\u307e\u3059\u3002"
  }]
}, {
  category: "\ud83c\udd98 Survival English",
  phrases: [{
    en: "I'm sorry, my English is not very good.",
    jp: "\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u3001\u82f1\u8a9e\u304c\u3042\u307e\u308a\u5f97\u610f\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",
    note: "\u307e\u305a\u6b63\u76f4\u306b\u4f1d\u3048\u308b\u3002\u7b11\u9854\u3067\u8a00\u3048\u3070\u76f8\u624b\u306f\u5b89\u5fc3\u3057\u3066\u304f\u308c\u308b"
  }, {
    en: "Could you speak more slowly, please?",
    jp: "\u3082\u3046\u5c11\u3057\u3086\u3063\u304f\u308a\u8a71\u3057\u3066\u3044\u305f\u3060\u3051\u307e\u3059\u304b\uff1f",
    note: "\u805e\u304d\u53d6\u308c\u306a\u3044\u3068\u304d\u306e\u6700\u91cd\u8981\u30d5\u30ec\u30fc\u30ba\u3002\u4f55\u5ea6\u4f7f\u3063\u3066\u3082\u5931\u793c\u3067\u306f\u306a\u3044"
  }, {
    en: "I'm sorry, could you say that again?",
    jp: "\u3059\u307f\u307e\u305b\u3093\u3001\u3082\u3046\u4e00\u5ea6\u304a\u3063\u3057\u3083\u3063\u3066\u3044\u305f\u3060\u3051\u307e\u3059\u304b\uff1f",
    note: "\u805e\u304d\u8fd4\u3059\u5b9a\u756a\u8868\u73fe\u3002'Pardon?' \u3060\u3051\u3067\u3082OK"
  }, {
    en: "Could you write it down, please?",
    jp: "\u66f8\u3044\u3066\u3044\u305f\u3060\u3051\u307e\u3059\u304b\uff1f",
    note: "\u6570\u5b57\u30fb\u30b9\u30da\u30eb\u30fb\u30e2\u30c7\u30eb\u540d\u306a\u3069\u306f\u66f8\u3044\u3066\u3082\u3089\u3046\u3068\u78ba\u5b9f"
  }, {
    en: "One moment, please. I'll get someone who can help you.",
    jp: "\u5c11\u3005\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002\u5bfe\u5fdc\u3067\u304d\u308b\u8005\u3092\u304a\u547c\u3073\u3057\u307e\u3059\u3002",
    note: "\u3053\u308c\u304c\u8a00\u3048\u308c\u3070\u5b8c\u74a7\u3002\u7126\u3089\u305a\u4f7f\u3048\u308b\u6700\u5f37\u30d5\u30ec\u30fc\u30ba"
  }, {
    en: "Please allow me to find a colleague who speaks English better.",
    jp: "\u82f1\u8a9e\u304c\u5f97\u610f\u306a\u30b9\u30bf\u30c3\u30d5\u3092\u304a\u547c\u3073\u3057\u3066\u3082\u3088\u3044\u3067\u3057\u3087\u3046\u304b\uff1f",
    note: "\u4e01\u5be7\u306b\u5f15\u304d\u7d99\u304e\u3092\u7533\u3057\u51fa\u308b\u8868\u73fe"
  }, {
    en: "I understand. Let me check on that for you.",
    jp: "\u627f\u77e5\u3057\u307e\u3057\u305f\u3002\u78ba\u8a8d\u3057\u3066\u307e\u3044\u308a\u307e\u3059\u3002",
    note: "\u308f\u304b\u3089\u306a\u304f\u3066\u3082\u300c\u78ba\u8a8d\u3057\u307e\u3059\u300d\u3068\u8a00\u3048\u308c\u3070\u5834\u304c\u3064\u306a\u3052\u308b"
  }, {
    en: "I'm not sure, but I'll find out right away.",
    jp: "\u306f\u3063\u304d\u308a\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u3059\u3050\u78ba\u8a8d\u3044\u305f\u3057\u307e\u3059\u3002",
    note: "\u77e5\u3089\u306a\u3044\u3053\u3068\u3092\u6b63\u76f4\u306b\u8a00\u3044\u306a\u304c\u3089\u8aa0\u610f\u3092\u898b\u305b\u308b"
  }, {
    en: "Thank you for your patience.",
    jp: "\u304a\u5f85\u305f\u305b\u3044\u305f\u3057\u307e\u3057\u305f\u3002\uff0f\u304a\u5f85\u3061\u3044\u305f\u3060\u304d\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002",
    note: "\u304a\u5ba2\u69d8\u3092\u5f85\u305f\u305b\u305f\u5f8c\u306b\u5fc5\u305a\u4f7f\u3046\u4e00\u8a00"
  }, {
    en: "Is there anything else I can help you with?",
    jp: "\u4ed6\u306b\u4f55\u304b\u3054\u7528\u306f\u3054\u3056\u3044\u307e\u3059\u304b\uff1f",
    note: "\u5bfe\u5fdc\u306e\u7de0\u3081\u304f\u304f\u308a\u306b\u4f7f\u3046\u5b9a\u756a\u30d5\u30ec\u30fc\u30ba"
  }]
}];
const QUIZ_QUESTIONS = [{
  id: "q0",
  jp: "\u3044\u3089\u3063\u3057\u3083\u3044\u307e\u305b\u3002\u672c\u65e5\u306f\u4f55\u304b\u304a\u63a2\u3057\u3067\u3057\u3087\u3046\u304b\uff1f",
  answer: "Welcome to our store. Are you looking for something in particular today?",
  hint: "Welcome / Are you looking for..."
}, {
  id: "q1",
  jp: "\u304b\u3051\u3066\u307f\u307e\u3059\u304b\uff1f\u93e1\u306f\u3053\u3061\u3089\u306b\u3054\u3056\u3044\u307e\u3059\u3002",
  answer: "Would you like to try them on? The mirror is right here.",
  hint: "Would you like to try..."
}, {
  id: "q2",
  jp: "\u3053\u306e\u30d5\u30ec\u30fc\u30e0\u306f\u3068\u3066\u3082\u3088\u304f\u304a\u4f3c\u5408\u3044\u3067\u3059\u3002",
  answer: "These frames suit you very well.",
  hint: "These frames suit you..."
}, {
  id: "q3",
  jp: "\u30cd\u30b8\u3082\u6eb6\u63a5\u3082\u4f7f\u3063\u3066\u3044\u307e\u305b\u3093\u3002",
  answer: "No screws, no welding.",
  hint: "No screws..."
}, {
  id: "q4",
  jp: "\u5168\u3066\u306e\u30d5\u30ec\u30fc\u30e0\u304c\u30d9\u30eb\u30ea\u30f3\u3067\u624b\u7d44\u307f\u3055\u308c\u3066\u3044\u307e\u3059\u3002",
  answer: "Every frame is hand-assembled in Berlin.",
  hint: "Every frame is hand-assembled..."
}, {
  id: "q5",
  jp: "\u9f3b\u306e\u4e0a\u306e\u5f53\u305f\u308a\u5177\u5408\u306f\u3044\u304b\u304c\u3067\u3059\u304b\uff1f",
  answer: "How does that feel on the bridge of your nose?",
  hint: "How does that feel on the bridge..."
}, {
  id: "q6",
  jp: "\u8ffd\u52a0\u6599\u91d1\u306f\u304b\u304b\u308a\u307e\u305b\u3093\u3002",
  answer: "At no extra charge.",
  hint: "At no extra..."
}, {
  id: "q7",
  jp: "\u9577\u671f\u7684\u306a\u6295\u8cc7\u3068\u3057\u3066\u8003\u3048\u3066\u3044\u3089\u3063\u3057\u3083\u308b\u304a\u5ba2\u69d8\u304c\u591a\u3044\u3067\u3059\u3002",
  answer: "Many customers consider them a long-term investment.",
  hint: "Many customers consider..."
}, {
  id: "q8",
  jp: "MYKITA\u306f\u6700\u5148\u7aef\u306e\u30a8\u30f3\u30b8\u30cb\u30a2\u30ea\u30f3\u30b0\u3068\u8077\u4eba\u6280\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u3044\u307e\u3059\u3002",
  answer: "MYKITA combines cutting-edge engineering with traditional craftsmanship.",
  hint: "MYKITA combines cutting-edge..."
}, {
  id: "q9",
  jp: "2003\u5e74\u306b\u30d9\u30eb\u30ea\u30f3\u3067\u5275\u696d\u3057\u305f\u30c9\u30a4\u30c4\u306e\u30a2\u30a4\u30a6\u30a7\u30a2\u30d6\u30e9\u30f3\u30c9\u3067\u3059\u3002",
  answer: "It's a German eyewear brand founded in Berlin in 2003.",
  hint: "It's a German eyewear brand..."
}, {
  id: "q10",
  jp: "\u3053\u306e\u30d5\u30ec\u30fc\u30e0\u306f\u8010\u4e45\u6027\u304c\u975e\u5e38\u306b\u9ad8\u3044\u3067\u3059\u3002",
  answer: "These frames are incredibly durable.",
  hint: "These frames are incredibly..."
}, {
  id: "q11",
  jp: "MYLON\u306f\u71b1\u9069\u5fdc\u6027\u7d20\u6750\u3067\u3001\u9854\u306e\u5f62\u306b\u3084\u3055\u3057\u304f\u306a\u3058\u307f\u307e\u3059\u3002",
  answer: "MYLON is a thermally adaptive material that gently molds to your face.",
  hint: "MYLON is a thermally adaptive..."
}, {
  id: "q12",
  jp: "\u30c6\u30f3\u30d7\u30eb\u306f\u8033\u306e\u5f8c\u308d\u306b\u5feb\u9069\u306b\u306e\u3063\u3066\u3044\u307e\u3059\u304b\uff1f",
  answer: "Are the temples sitting comfortably behind your ears?",
  hint: "Are the temples sitting..."
}, {
  id: "q13",
  jp: "\u3054\u9060\u616e\u306a\u304f\u304a\u597d\u304d\u306a\u3060\u3051\u304b\u3051\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002",
  answer: "Feel free to try on as many frames as you like.",
  hint: "Feel free to try on..."
}, {
  id: "q14",
  jp: "\u30c7\u30b6\u30a4\u30f3\u304b\u3089\u88fd\u9020\u307e\u3067\u5168\u3066\u3092\u81ea\u793e\u5185\u3067\u884c\u3063\u3066\u3044\u307e\u3059\u3002",
  answer: "Everything is done in-house, from design to production.",
  hint: "Everything is done in-house..."
}, {
  id: "q15",
  jp: "\u3053\u306e\u4fa1\u683c\u306f\u624b\u4f5c\u308a\u306e\u54c1\u8cea\u3092\u53cd\u6620\u3057\u3066\u3044\u307e\u3059\u3002",
  answer: "The price reflects the handmade quality.",
  hint: "The price reflects..."
}, {
  id: "q16",
  jp: "\u30cd\u30b8\u304c\u306a\u3044\u306e\u3067\u3001\u7d4c\u5e74\u3067\u7de9\u3093\u3067\u304f\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u305b\u3093\u3002",
  answer: "Because there are no screws, there's nothing to come loose over time.",
  hint: "Because there are no screws..."
}, {
  id: "q17",
  jp: "\u4f55\u304b\u3054\u4e0d\u660e\u306a\u70b9\u304c\u3042\u308a\u307e\u3057\u305f\u3089\u304a\u58f0\u304c\u3051\u304f\u3060\u3055\u3044\u3002",
  answer: "Please let me know if you need any assistance.",
  hint: "Please let me know if you need..."
}, {
  id: "q18",
  jp: "LITE\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306f\u308f\u305a\u304b3\u30d1\u30fc\u30c4\u3067\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002",
  answer: "The LITE collection is made of just three components.",
  hint: "The LITE collection is made of..."
}, {
  id: "q19",
  jp: "\u30d5\u30a9\u30eb\u30e0\u304c\u304a\u9854\u3092\u3068\u3066\u3082\u5f15\u304d\u7acb\u3066\u3066\u3044\u307e\u3059\u306d\u3002",
  answer: "The shape complements your face perfectly.",
  hint: "The shape complements..."
}, {
  id: "q20",
  jp: "MYKITA\u306f\u72ec\u7acb\u7cfb\u30d6\u30e9\u30f3\u30c9\u3067\u3001\u5927\u624b\u30b0\u30eb\u30fc\u30d7\u306b\u306f\u5c5e\u3057\u3066\u3044\u307e\u305b\u3093\u3002",
  answer: "MYKITA is an independent brand \u2014 not owned by any of the major eyewear groups.",
  hint: "MYKITA is an independent brand..."
}, {
  id: "q21",
  jp: "\u3088\u308a\u4f4e\u3044\u4fa1\u683c\u5e2f\u306e\u3082\u306e\u3092\u3054\u89a7\u3044\u305f\u3060\u3051\u307e\u3059\u3088\u3002",
  answer: "I can show you something in a different price range.",
  hint: "I can show you something in a different..."
}, {
  id: "q22",
  jp: "\u3053\u306e\u30a2\u30bb\u30c6\u30fc\u30c8\u306f\u7279\u306b\u6df1\u307f\u306e\u3042\u308b\u8272\u5408\u3044\u3067\u3059\u3002",
  answer: "The acetate in this collection is particularly rich \u2014 you can see the depth in the color.",
  hint: "The acetate is particularly rich..."
}, {
  id: "q23",
  jp: "\u30c6\u30f3\u30d7\u30eb\u3092\u307b\u307c\u5e73\u3089\u306b\u306a\u308b\u307e\u3067\u66f2\u3052\u3066\u3082\u5927\u4e08\u592b\u3067\u3059\u3002",
  answer: "You can flex the temples almost flat without damage.",
  hint: "You can flex the temples..."
}];
const BRAND_KNOWLEDGE = {
  origin: {
    title: "Brand Origin",
    content: "MYKITA was founded in Berlin, Germany in 2003. The name comes from 'Kita' \u2014 a German abbreviation for Kindertagesst\u00e4tte (day nursery), referencing the brand's first premises in a former day care center. Founder Moritz Kr\u00fcger has described the name as reflecting a spirit of curiosity and playfulness.",
    keyPhrases: [{
      en: "Founded in Berlin in 2003",
      jp: "2003\u5e74\u306b\u30d9\u30eb\u30ea\u30f3\u3067\u5275\u696d"
    }, {
      en: "All frames are hand-assembled at MYKITA HAUS",
      jp: "\u5168\u30d5\u30ec\u30fc\u30e0\u306fMYKITA HAUS\u3067\u624b\u7d44\u307f"
    }, {
      en: "Named after a former day nursery \u2014 Kita means day care in German",
      jp: "\u65e7\u4fdd\u80b2\u6240\u306b\u3061\u306a\u3093\u3060\u540d\u524d \u2014 Kita\u306f\u30c9\u30a4\u30c4\u3067Kindertagesst\u00e4tte\uff08\u4fdd\u80b2\u6240\uff09\u306e\u7565"
    }]
  },
  philosophy: {
    title: "Design Philosophy",
    content: "MYKITA brings together cutting-edge engineering and traditional craftsmanship under one roof. Every product goes through every stage of development in-house \u2014 from concept to shop floor \u2014 ensuring uncompromising quality. MYKITA describes itself as a 'modern manufactory' driven by a collective impulse to challenge the status quo.",
    keyPhrases: [{
      en: "A marriage of high technology and handcraft",
      jp: "\u30cf\u30a4\u30c6\u30af\u3068\u8077\u4eba\u6280\u306e\u878d\u5408"
    }, {
      en: "Everything is designed and made in Berlin",
      jp: "\u3059\u3079\u3066\u30d9\u30eb\u30ea\u30f3\u3067\u30c7\u30b6\u30a4\u30f3\u30fb\u88fd\u9020"
    }, {
      en: "A spirit of innovation and a commitment to quality",
      jp: "\u9769\u65b0\u306e\u7cbe\u795e\u3068\u54c1\u8cea\u3078\u306e\u3053\u3060\u308f\u308a"
    }]
  },
  collections: [{
    name: "Collection No1 (Metal)",
    description: "Stainless steel frames with MYKITA's patented hingeless design \u2014 no screws, no welding. Cut from flat sheet metal like origami, then shaped by hand.",
    salesPoint: "The patented hinge you can see on the temple is MYKITA's signature. It creates a distinctive click when you close the frame.",
    salesPointJp: "\u30c6\u30f3\u30d7\u30eb\u306b\u898b\u3048\u308b\u7279\u8a31\u30d2\u30f3\u30b8\u304cMYKITA\u306e\u30c8\u30ec\u30fc\u30c9\u30de\u30fc\u30af\u3067\u3059\u3002\u30d5\u30ec\u30fc\u30e0\u3092\u9589\u3058\u308b\u3068\u72ec\u7279\u306e\u30af\u30ea\u30c3\u30af\u611f\u304c\u3042\u308a\u307e\u3059\u3002"
  }, {
    name: "Collection No2 (Acetate)",
    description: "Voluminous acetate frames with a patented Metal Injection Molding hinge. Bold colors and sculptural forms.",
    salesPoint: "The acetate collection offers a richer, more colorful expression \u2014 perfect for customers who want a bold statement.",
    salesPointJp: "\u30a2\u30bb\u30c6\u30fc\u30c8\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306f\u3088\u308a\u8c4a\u304b\u3067\u8272\u5f69\u8c4a\u304b\u306a\u8868\u73fe\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u5927\u80c6\u306a\u5370\u8c61\u3092\u6c42\u3081\u308b\u304a\u5ba2\u69d8\u306b\u6700\u9069\u3067\u3059\u3002"
  }, {
    name: "MYKITA LITE",
    description: "Ultra-lightweight metal frames comprising just three parts. The most minimal and refined expression of MYKITA's engineering.",
    salesPoint: "These are MYKITA's lightest frames \u2014 some customers say they forget they're wearing glasses.",
    salesPointJp: "MYKITA\u3067\u6700\u3082\u8efd\u3044\u30d5\u30ec\u30fc\u30e0\u3067\u3059\u3002\u304b\u3051\u3066\u3044\u308b\u3053\u3068\u3092\u5fd8\u308c\u308b\u3068\u8a00\u3046\u304a\u5ba2\u69d8\u3082\u3044\u3089\u3063\u3057\u3083\u3044\u307e\u3059\u3002"
  }, {
    name: "MYKITA MYLON",
    description: "Frames produced using selective laser sintering (SLS) with polyamide powder. Zero-waste production \u2014 any unused powder is recycled.",
    salesPoint: "MYLON is a thermally adaptive material \u2014 the frames adjust gently to the wearer's face shape for exceptional comfort.",
    salesPointJp: "MYLON\u306f\u71b1\u9069\u5fdc\u7d20\u6750\u3067\u3001\u30d5\u30ec\u30fc\u30e0\u304c\u88c5\u7740\u8005\u306e\u9854\u306e\u5f62\u306b\u3084\u3055\u3057\u304f\u30d5\u30a3\u30c3\u30c8\u3057\u3001\u629c\u7fa4\u306e\u5feb\u9069\u3055\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002"
  }, {
    name: "MYKITA DECADES",
    description: "Interprets classic spectacle forms from the 20th century using ultra-thin stainless steel. Retro silhouettes with contemporary precision.",
    salesPoint: "If you love vintage-inspired shapes but want modern quality, DECADES is the perfect blend.",
    salesPointJp: "\u30f4\u30a3\u30f3\u30c6\u30fc\u30b8\u611f\u306e\u3042\u308b\u5f62\u304c\u597d\u304d\u3067\u3001\u73fe\u4ee3\u7684\u306a\u54c1\u8cea\u3092\u6c42\u3081\u308b\u65b9\u306b\u306f\u3001DECADES\u304c\u5b8c\u74a7\u306a\u9078\u629e\u3067\u3059\u3002"
  }]
};
function MYKITAEnglishApp() {
  const [activeTab, setActiveTab] = useState("shadowing");
  const [selectedCategory, setSelectedCategory] = useState(0);
  const [selectedPhrase, setSelectedPhrase] = useState(null);
  const [showJp, setShowJp] = useState({});
  const [dictWord, setDictWord] = useState(null);
  const [dictResult, setDictResult] = useState(null);
  const [dictLoading, setDictLoading] = useState(false);
  const [isSpeaking, setIsSpeaking] = useState(false);
  const [isRecording, setIsRecording] = useState(false);
  const [transcript, setTranscript] = useState("");
  const [interimTranscript, setInterimTranscript] = useState("");
  const [jpWarning, setJpWarning] = useState(false);
  const [knowledgeSection, setKnowledgeSection] = useState("collections");
  const [showSalesJp, setShowSalesJp] = useState({});
  const [showKpJp, setShowKpJp] = useState({});
  const [vocabCategory, setVocabCategory] = useState(0);
  const [expandedWord, setExpandedWord] = useState(null);
  const [vocabFlipMode, setVocabFlipMode] = useState(false);
  const [flashIndex, setFlashIndex] = useState(0);
  const [flashRevealed, setFlashRevealed] = useState(false);
  const [messages, setMessages] = useState([{
    role: "assistant",
    content: "Hello! Welcome to your store. I'm looking for some new glasses today. Can you help me?"
  }]);
  const [userInput, setUserInput] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [scenario, setScenario] = useState("general");
  const [jpFeedback, setJpFeedback] = useState({});
  const [loadingFeedback, setLoadingFeedback] = useState(null);
  const [quizStats, setQuizStats] = useState({});
  const [currentQuizIndex, setCurrentQuizIndex] = useState(null);
  const [quizInput, setQuizInput] = useState("");
  const [quizResult, setQuizResult] = useState(null);
  const [showHint, setShowHint] = useState(false);
  const [showAnswer, setShowAnswer] = useState(false);
  const [vocabStats, setVocabStats] = useState({});
  const [audioURL, setAudioURL] = useState(null);
  const [audioBlob, setAudioBlob] = useState(null);
  const [isPlaying, setIsPlaying] = useState(false);
  const audioSourceRef = useRef(null);
  const audioCtxRef = useRef(null);
  const [pendingRecord, setPendingRecord] = useState(false);
  const chatEndRef = useRef(null);
  const recognitionRef = useRef(null);
  const mediaRecorderRef = useRef(null);
  const audioChunksRef = useRef([]);
  useEffect(() => {
    try {
      const q = localStorage.getItem("mykita_quiz_stats");
      if (q) setQuizStats(JSON.parse(q));
    } catch (e) {}
    try {
      const v = localStorage.getItem("mykita_vocab_stats");
      if (v) setVocabStats(JSON.parse(v));
    } catch (e) {}
    ;
  }, []);
  const saveQuizStats = next => {
    setQuizStats(next);
    try {
      localStorage.setItem("mykita_quiz_stats", JSON.stringify(next));
    } catch (e) {}
  };
  const saveVocabStats = next => {
    setVocabStats(next);
    try {
      localStorage.setItem("mykita_vocab_stats", JSON.stringify(next));
    } catch (e) {}
  };
  useEffect(() => {
    if (activeTab === "quiz" && currentQuizIndex === null) pickNextQuestion({});
  }, [activeTab]);
  const pickNextQuestion = function () {
    let stats = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : quizStats;
    const statArr = QUIZ_QUESTIONS.map(q => stats[q.id] || {
      attempts: 0,
      correct: 0
    });
    const idx = weightedPick(QUIZ_QUESTIONS, statArr);
    setCurrentQuizIndex(idx);
    setQuizInput("");
    setQuizResult(null);
    setShowHint(false);
    setShowAnswer(false);
  };
  const pickNextFlash = function (catIdx) {
    let stats = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : vocabStats;
    const words = VOCAB[catIdx].words;
    const statArr = words.map((_, wi) => stats[`${catIdx}-${wi}`] || {
      attempts: 0,
      correct: 0
    });
    return weightedPick(words, statArr);
  };
  useEffect(() => {
    var _chatEndRef$current;
    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 || _chatEndRef$current.scrollIntoView({
      behavior: "smooth"
    });
  }, [messages]);
  const getBestVoice = useCallback(() => {
    const voices = window.speechSynthesis.getVoices();
    const priority = [v => /en.US/i.test(v.lang) && /neural|premium|enhanced/i.test(v.name), v => /en.US/i.test(v.lang) && /google/i.test(v.name), v => /en.US/i.test(v.lang) && /microsoft/i.test(v.name) && /natural|aria|jenny|guy/i.test(v.name), v => /en.US/i.test(v.lang) && /microsoft/i.test(v.name), v => /en.US/i.test(v.lang) && /samantha|alex|zira/i.test(v.name), v => /en.US/i.test(v.lang), v => /en/i.test(v.lang)];
    for (const test of priority) {
      const f = voices.find(test);
      if (f) return f;
    }
    return null;
  }, []);
  const speak = useCallback(function (text) {
    let rate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1.0;
    if (!window.speechSynthesis) return;
    window.speechSynthesis.cancel();
    const doSpeak = () => {
      const utt = new SpeechSynthesisUtterance(text);
      utt.lang = "en-US";
      utt.rate = rate;
      utt.pitch = 1.0;
      const voice = getBestVoice();
      if (voice) utt.voice = voice;
      utt.onstart = () => setIsSpeaking(true);
      utt.onend = () => setIsSpeaking(false);
      window.speechSynthesis.speak(utt);
    };
    if (window.speechSynthesis.getVoices().length > 0) doSpeak();else {
      window.speechSynthesis.onvoiceschanged = () => {
        doSpeak();
        window.speechSynthesis.onvoiceschanged = null;
      };
    }
  }, [getBestVoice]);
  const hasJapanese = text => /[\u3040-\u30FF\u4E00-\u9FFF]/.test(text);
  const lookupWord = async word => {
    const clean = word.replace(/[^a-zA-Z\-']/g, "").toLowerCase();
    if (!clean) return;
    if (dictWord === clean) {
      setDictWord(null);
      setDictResult(null);
      return;
    }
    setDictWord(clean);
    setDictResult(null);
    setDictLoading(true);
    for (const cat of VOCAB) {
      for (const w of cat.words) {
        if (w.en.toLowerCase() === clean || w.en.toLowerCase().includes(clean)) {
          setDictResult({
            jp: w.jp,
            note: w.note,
            usage: w.usage,
            source: "vocab"
          });
          setDictLoading(false);
          return;
        }
      }
    }
    try {
      var _entry$phonetics, _entry$meanings, _meaning$definitions;
      const res = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${encodeURIComponent(clean)}`);
      if (!res.ok) throw new Error("not found");
      const data = await res.json();
      const entry = data[0];
      const phonetic = ((_entry$phonetics = entry.phonetics) === null || _entry$phonetics === void 0 || (_entry$phonetics = _entry$phonetics.find(p => p.text)) === null || _entry$phonetics === void 0 ? void 0 : _entry$phonetics.text) || "";
      const meaning = (_entry$meanings = entry.meanings) === null || _entry$meanings === void 0 ? void 0 : _entry$meanings[0];
      const def = meaning === null || meaning === void 0 || (_meaning$definitions = meaning.definitions) === null || _meaning$definitions === void 0 ? void 0 : _meaning$definitions[0];
      const partOfSpeech = (meaning === null || meaning === void 0 ? void 0 : meaning.partOfSpeech) || "";
      const example = (def === null || def === void 0 ? void 0 : def.example) || "";
      const jpDef = (def === null || def === void 0 ? void 0 : def.definition) || "";
      setDictResult({
        jp: jpDef,
        pronunciation: phonetic,
        note: partOfSpeech ? `\u54c1\u8a5e: ${partOfSpeech}` : "",
        example: example,
        source: "api"
      });
    } catch (e) {
      setDictResult({
        jp: "\u3053\u306e\u5358\u8a9e\u306f\u8f9e\u66f8\u306b\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f",
        note: "",
        source: "error"
      });
    }
    setDictLoading(false);
  };
  const stripJapanese = text => text.replace(/[\u3040-\u30FF\u4E00-\u9FFF\uFF00-\uFFEF]+/g, "").replace(/\s+/g, " ").trim();
  const streamRef = useRef(null);
  const audioRef = useRef(null);
  const playRecording = async () => {
    if (!audioBlob) return;
    if (isPlaying) {
      try {
        var _audioSourceRef$curre;
        (_audioSourceRef$curre = audioSourceRef.current) === null || _audioSourceRef$curre === void 0 || _audioSourceRef$curre.stop();
      } catch (e) {}
      try {
        var _audioCtxRef$current;
        (_audioCtxRef$current = audioCtxRef.current) === null || _audioCtxRef$current === void 0 || _audioCtxRef$current.close();
      } catch (e) {}
      audioCtxRef.current = null;
      audioSourceRef.current = null;
      setIsPlaying(false);
      return;
    }
    try {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      audioCtxRef.current = ctx;
      const arrayBuf = await audioBlob.arrayBuffer();
      const audioBuf = await ctx.decodeAudioData(arrayBuf);
      const source = ctx.createBufferSource();
      source.buffer = audioBuf;
      source.connect(ctx.destination);
      source.onended = () => {
        setIsPlaying(false);
        try {
          ctx.close();
        } catch (e) {}
        audioCtxRef.current = null;
        audioSourceRef.current = null;
      };
      audioSourceRef.current = source;
      source.start(0);
      setIsPlaying(true);
    } catch (e) {
      setIsPlaying(false);
    }
  };
  const cleanupRecording = () => {
    try {
      var _recognitionRef$curre;
      (_recognitionRef$curre = recognitionRef.current) === null || _recognitionRef$curre === void 0 || _recognitionRef$curre.abort();
    } catch (e) {}
    recognitionRef.current = null;
    try {
      if (mediaRecorderRef.current && mediaRecorderRef.current.state !== "inactive") {
        mediaRecorderRef.current.stop();
      }
    } catch (e) {}
    mediaRecorderRef.current = null;
    try {
      var _streamRef$current;
      (_streamRef$current = streamRef.current) === null || _streamRef$current === void 0 || _streamRef$current.getTracks().forEach(t => t.stop());
    } catch (e) {}
    streamRef.current = null;
    audioChunksRef.current = [];
  };
  const startRecording = () => {
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SR) {
      setTranscript("\u26a0\ufe0f iPhone Safari\u306fSpeechRecognition\u306b\u975e\u5bfe\u5fdc\u3067\u3059\u3002PC\u7248Chrome\u3092\u304a\u4f7f\u3044\u304f\u3060\u3055\u3044\u306a\u3002");
      return;
    }
    try {
      var _audioSourceRef$curre2;
      (_audioSourceRef$curre2 = audioSourceRef.current) === null || _audioSourceRef$curre2 === void 0 || _audioSourceRef$curre2.stop();
    } catch (e) {}
    try {
      var _audioCtxRef$current2;
      (_audioCtxRef$current2 = audioCtxRef.current) === null || _audioCtxRef$current2 === void 0 || _audioCtxRef$current2.close();
    } catch (e) {}
    audioCtxRef.current = null;
    audioSourceRef.current = null;
    setIsPlaying(false);
    if (audioRef.current) {
      audioRef.current.pause();
      audioRef.current.src = "";
    }
    cleanupRecording();
    if (audioURL) {
      URL.revokeObjectURL(audioURL);
    }
    setAudioURL(null);
    setTranscript("");
    setInterimTranscript("");
    setJpWarning(false);
    setPendingRecord(true);
  };
  useEffect(() => {
    if (!pendingRecord) return;
    setPendingRecord(false);
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    const doRecord = async () => {
      await new Promise(r => setTimeout(r, 500));
      let stream;
      try {
        stream = await navigator.mediaDevices.getUserMedia({
          audio: true
        });
        streamRef.current = stream;
      } catch (e) {
        setTranscript("\u26a0\ufe0f \u30de\u30a4\u30af\u3078\u306e\u30a2\u30af\u30bb\u30b9\u304c\u62d2\u5426\u3055\u308c\u307e\u3057\u305f\u3002\u8a2d\u5b9a\u304b\u3089\u30de\u30a4\u30af\u3092\u8a31\u53ef\u3057\u3066\u304f\u3060\u3055\u3044\u306a\u3002");
        return;
      }
      try {
        audioChunksRef.current = [];
        const mimeType = ["audio/mp4", "audio/aac", "audio/webm", ""].find(m => m === "" || MediaRecorder.isTypeSupported(m));
        const mr = mimeType ? new MediaRecorder(stream, {
          mimeType
        }) : new MediaRecorder(stream);
        mr.ondataavailable = e => {
          if (e.data.size > 0) audioChunksRef.current.push(e.data);
        };
        mr.onstop = () => {
          if (audioChunksRef.current.length > 0) {
            const blob = new Blob(audioChunksRef.current, {
              type: mr.mimeType || "audio/mp4"
            });
            setAudioBlob(blob);
            setAudioURL("ready");
          }
        };
        mr.start(100);
        mediaRecorderRef.current = mr;
      } catch (e) {
        stream.getTracks().forEach(t => t.stop());
        streamRef.current = null;
        setTranscript("\u26a0\ufe0f \u9332\u97f3\u306e\u958b\u59cb\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002");
        return;
      }
      const rec = new SR();
      rec.lang = "en-US";
      rec.continuous = false;
      rec.interimResults = true;
      rec.maxAlternatives = 5;
      rec.onresult = e => {
        let interim = "";
        for (let i = e.resultIndex; i < e.results.length; i++) {
          if (e.results[i].isFinal) {
            let best = e.results[i][0].transcript;
            for (let j = 0; j < e.results[i].length; j++) {
              const alt = e.results[i][j].transcript;
              if (!hasJapanese(alt)) {
                best = alt;
                break;
              }
            }
            if (hasJapanese(best)) {
              setJpWarning(true);
              best = stripJapanese(best);
            }
            setTranscript(best);
            setInterimTranscript("");
          } else {
            interim += e.results[i][0].transcript;
            if (hasJapanese(interim)) setJpWarning(true);
            setInterimTranscript(interim);
          }
        }
      };
      const stoppedByUser = {
        current: false
      };
      recognitionRef.current = rec;
      recognitionRef.current._stoppedByUser = stoppedByUser;
      rec.onend = () => {
        setInterimTranscript("");
        if (!stoppedByUser.current) {
          try {
            rec.start();
          } catch (e) {}
        } else {
          setIsRecording(false);
          try {
            var _mediaRecorderRef$cur;
            (_mediaRecorderRef$cur = mediaRecorderRef.current) === null || _mediaRecorderRef$cur === void 0 || _mediaRecorderRef$cur.stop();
          } catch (e) {}
          try {
            var _streamRef$current2;
            (_streamRef$current2 = streamRef.current) === null || _streamRef$current2 === void 0 || _streamRef$current2.getTracks().forEach(t => t.stop());
            streamRef.current = null;
          } catch (e) {}
        }
      };
      rec.onerror = e => {
        if (e.error === "no-speech") return;
        setInterimTranscript("");
        if (!stoppedByUser.current) {
          try {
            rec.start();
          } catch (err) {}
        } else {
          setIsRecording(false);
          try {
            var _mediaRecorderRef$cur2;
            (_mediaRecorderRef$cur2 = mediaRecorderRef.current) === null || _mediaRecorderRef$cur2 === void 0 || _mediaRecorderRef$cur2.stop();
          } catch (err) {}
          try {
            var _streamRef$current3;
            (_streamRef$current3 = streamRef.current) === null || _streamRef$current3 === void 0 || _streamRef$current3.getTracks().forEach(t => t.stop());
            streamRef.current = null;
          } catch (err) {}
        }
      };
      rec.start();
      setIsRecording(true);
    };
    doRecord();
  }, [pendingRecord]);
  const stopRecording = () => {
    var _recognitionRef$curre2;
    setIsRecording(false);
    setInterimTranscript("");
    if ((_recognitionRef$curre2 = recognitionRef.current) !== null && _recognitionRef$curre2 !== void 0 && _recognitionRef$curre2._stoppedByUser) {
      recognitionRef.current._stoppedByUser.current = true;
    }
    try {
      var _recognitionRef$curre3;
      (_recognitionRef$curre3 = recognitionRef.current) === null || _recognitionRef$curre3 === void 0 || _recognitionRef$curre3.stop();
    } catch (e) {}
    try {
      var _mediaRecorderRef$cur3;
      (_mediaRecorderRef$cur3 = mediaRecorderRef.current) === null || _mediaRecorderRef$cur3 === void 0 || _mediaRecorderRef$cur3.stop();
    } catch (e) {}
    try {
      var _streamRef$current4;
      (_streamRef$current4 = streamRef.current) === null || _streamRef$current4 === void 0 || _streamRef$current4.getTracks().forEach(t => t.stop());
      streamRef.current = null;
    } catch (e) {}
  };
  const SCENARIOS = {
    general: "You are a customer at a high-end eyewear boutique. You're browsing and open to suggestions. Respond naturally, 1-2 sentences. English only.",
    mykita: "You are a customer interested in MYKITA frames. Ask detailed questions about the brand, hinge design, and materials. 1-2 sentences. English only.",
    objection: "You are a customer hesitant about the price. Push back politely on value claims. 1-2 sentences. English only.",
    tourist: "You are a tourist in Japan who speaks only English. You need prescription glasses urgently. 1-2 sentences. English only."
  };
  const callAPI = async (system, msgs) => {
    var _data$content;
    const res = await fetch("https://api.anthropic.com/v1/messages", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        model: "claude-sonnet-4-20250514",
        max_tokens: 1000,
        system,
        messages: msgs
      })
    });
    const data = await res.json();
    return ((_data$content = data.content) === null || _data$content === void 0 || (_data$content = _data$content[0]) === null || _data$content === void 0 ? void 0 : _data$content.text) || "";
  };
  const sendMessage = async () => {
    if (!userInput.trim() || isLoading) return;
    const newMsgs = [...messages, {
      role: "user",
      content: userInput
    }];
    setMessages(newMsgs);
    setUserInput("");
    setIsLoading(true);
    try {
      const reply = await callAPI(SCENARIOS[scenario], newMsgs.map(m => ({
        role: m.role,
        content: m.content
      })));
      setMessages(prev => [...prev, {
        role: "assistant",
        content: reply
      }]);
      speak(reply, 0.9);
    } catch {
      setMessages(prev => [...prev, {
        role: "assistant",
        content: "Sorry, there was an error."
      }]);
    }
    setIsLoading(false);
  };
  const getFeedback = async (idx, text) => {
    setLoadingFeedback(idx);
    try {
      const fb = await callAPI(`\u3042\u306a\u305f\u306f\u30e1\u30ac\u30cd\u8ca9\u58f2\u54e1\u5411\u3051\u82f1\u8a9e\u30c8\u30ec\u30fc\u30ca\u30fc\u3067\u3059\u3002\u4ee5\u4e0b\u306e\u5f62\u5f0f\u3067\u8fd4\u7b54\u3057\u3066\u304f\u3060\u3055\u3044\uff1a
\u3010\u81ea\u7136\u3055\u3011\u2605\u2605\u2605\u2606\u2606\uff085\u6bb5\u968e\uff09
\u3010\u610f\u5473\u3011\uff08\u65e5\u672c\u8a9e\u8a33\uff09
\u3010\u6539\u5584\u30dd\u30a4\u30f3\u30c8\u3011\uff08\u3042\u308c\u3070\u7c21\u6f54\u306b\uff09
\u3010\u3088\u308a\u81ea\u7136\u306a\u8868\u73fe\u3011\uff08\u3042\u308c\u3070\uff09`, [{
        role: "user",
        content: `\u3053\u306e\u30d5\u30ec\u30fc\u30ba\u3092\u8a55\u4fa1\u3057\u3066\u304f\u3060\u3055\u3044\uff1a\u300c${text}\u300d`
      }]);
      setJpFeedback(prev => ({
        ...prev,
        [idx]: fb
      }));
    } catch {
      setJpFeedback(prev => ({
        ...prev,
        [idx]: "\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002"
      }));
    }
    setLoadingFeedback(null);
  };
  const resetChat = () => {
    setMessages([{
      role: "assistant",
      content: "Hello! Welcome to your store. I'm looking for some new glasses today. Can you help me?"
    }]);
    setUserInput("");
    setJpFeedback({});
  };
  const checkQuiz = async () => {
    const q = QUIZ_QUESTIONS[currentQuizIndex];
    setQuizResult({
      loading: true
    });
    try {
      var _quizStats$q$id, _quizStats$q$id2;
      const raw = await callAPI(`\u3042\u306a\u305f\u306f\u30e1\u30ac\u30cd\u8ca9\u58f2\u54e1\u5411\u3051\u82f1\u8a9e\u6559\u5e2b\u3067\u3059\u3002\u6a21\u7bc4\u89e3\u7b54\uff1a\u300c${q.answer}\u300d
\u610f\u5473\u304c\u540c\u3058\u306a\u3089\u6b63\u89e3\u3068\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306eJSON\u5f62\u5f0f\u306e\u307f\u3067\u8fd4\u7b54\uff1a
{"correct": true, "feedback": "\u65e5\u672c\u8a9e\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af", "naturalExample": "\u3088\u308a\u81ea\u7136\u306a\u8868\u73fe\uff08\u306a\u3051\u308c\u3070null\uff09"}`, [{
        role: "user",
        content: quizInput
      }]);
      const parsed = JSON.parse(raw.replace(/```json|```/g, "").trim());
      setQuizResult(parsed);
      const next = {
        ...quizStats,
        [q.id]: {
          attempts: (((_quizStats$q$id = quizStats[q.id]) === null || _quizStats$q$id === void 0 ? void 0 : _quizStats$q$id.attempts) || 0) + 1,
          correct: (((_quizStats$q$id2 = quizStats[q.id]) === null || _quizStats$q$id2 === void 0 ? void 0 : _quizStats$q$id2.correct) || 0) + (parsed.correct ? 1 : 0)
        }
      };
      saveQuizStats(next);
    } catch {
      setQuizResult({
        correct: false,
        feedback: "\u63a1\u70b9\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002"
      });
    }
  };
  const toggleJp = (key, setter) => setter(prev => ({
    ...prev,
    [key]: !prev[key]
  }));
  const S = {
    app: {
      minHeight: "100vh",
      background: "#0a0a0a",
      color: "#f0ede8",
      fontFamily: "'DM Serif Display', Georgia, serif",
      display: "flex",
      flexDirection: "column"
    },
    header: {
      borderBottom: "1px solid #222",
      padding: "20px 28px 0",
      background: "#0f0f0f"
    },
    logo: {
      fontSize: "10px",
      letterSpacing: "0.3em",
      color: "#c8b89a",
      fontFamily: "monospace",
      marginBottom: "4px"
    },
    title: {
      fontSize: "20px",
      letterSpacing: "0.05em",
      margin: "0 0 14px",
      fontWeight: "400"
    },
    tabs: {
      display: "flex",
      flexWrap: "wrap"
    },
    tab: a => ({
      padding: "10px 16px",
      background: "transparent",
      border: "none",
      color: a ? "#c8b89a" : "#555",
      borderBottom: a ? "2px solid #c8b89a" : "2px solid transparent",
      cursor: "pointer",
      fontFamily: "monospace",
      fontSize: "10px",
      letterSpacing: "0.12em",
      textTransform: "uppercase"
    }),
    main: {
      flex: 1,
      padding: "24px 28px",
      maxWidth: "900px",
      width: "100%",
      margin: "0 auto",
      boxSizing: "border-box"
    },
    label: {
      fontSize: "10px",
      letterSpacing: "0.25em",
      color: "#c8b89a",
      textTransform: "uppercase",
      fontFamily: "monospace",
      marginBottom: "14px",
      display: "block"
    },
    row: {
      display: "flex",
      gap: "8px",
      flexWrap: "wrap",
      marginBottom: "14px"
    },
    catBtn: a => ({
      padding: "5px 12px",
      background: a ? "#c8b89a" : "transparent",
      border: `1px solid ${a ? "#c8b89a" : "#333"}`,
      color: a ? "#0a0a0a" : "#888",
      borderRadius: "2px",
      cursor: "pointer",
      fontFamily: "monospace",
      fontSize: "10px"
    }),
    phraseCard: sel => ({
      border: `1px solid ${sel ? "#c8b89a" : "#222"}`,
      borderRadius: "3px",
      padding: "16px",
      marginBottom: "10px",
      background: sel ? "#161410" : "#111"
    }),
    phraseEn: {
      fontSize: "15px",
      lineHeight: "1.5",
      color: "#f0ede8",
      marginBottom: "8px"
    },
    btn: function () {
      let v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "d";
      return {
        padding: "7px 14px",
        cursor: "pointer",
        borderRadius: "2px",
        fontFamily: "monospace",
        fontSize: "10px",
        letterSpacing: "0.1em",
        textTransform: "uppercase",
        whiteSpace: "nowrap",
        background: v === "p" ? "#c8b89a" : v === "r" ? "#8b3030" : v === "j" ? "#0d1a0d" : "transparent",
        border: `1px solid ${v === "p" ? "#c8b89a" : v === "r" ? "#8b3030" : v === "j" ? "#3a6a3a" : "#444"}`,
        color: v === "p" ? "#0a0a0a" : v === "j" ? "#8bc98b" : "#ccc"
      };
    },
    jpBox: {
      marginTop: "8px",
      padding: "10px 12px",
      background: "#0d1a0d",
      border: "1px solid #2a4a2a",
      borderRadius: "3px",
      fontFamily: "monospace",
      fontSize: "11px",
      color: "#8bc98b",
      lineHeight: "1.6"
    },
    card: {
      padding: "16px",
      background: "#111",
      border: "1px solid #222",
      borderRadius: "3px",
      marginBottom: "10px"
    },
    collectionGrid: {
      display: "grid",
      gridTemplateColumns: "repeat(auto-fill, minmax(240px, 1fr))",
      gap: "12px"
    },
    cName: {
      fontSize: "10px",
      letterSpacing: "0.15em",
      color: "#c8b89a",
      fontFamily: "monospace",
      marginBottom: "8px"
    },
    cDesc: {
      fontSize: "13px",
      lineHeight: "1.6",
      color: "#ccc",
      marginBottom: "10px"
    },
    salesPt: {
      fontSize: "11px",
      fontFamily: "monospace",
      color: "#888",
      borderLeft: "2px solid #c8b89a",
      paddingLeft: "10px",
      lineHeight: "1.5"
    },
    chatBox: {
      background: "#0d0d0d",
      border: "1px solid #222",
      borderRadius: "3px",
      height: "300px",
      overflowY: "auto",
      padding: "16px",
      marginBottom: "12px"
    },
    bubble: r => ({
      display: "flex",
      justifyContent: r === "user" ? "flex-end" : "flex-start",
      marginBottom: "8px"
    }),
    bubbleIn: r => ({
      maxWidth: "75%",
      padding: "10px 14px",
      borderRadius: "3px",
      background: r === "user" ? "#c8b89a" : "#1a1a1a",
      color: r === "user" ? "#0a0a0a" : "#e0ddd8",
      fontSize: "13px",
      lineHeight: "1.5",
      border: `1px solid ${r === "user" ? "#c8b89a" : "#2a2a2a"}`
    }),
    roleLabel: r => ({
      fontSize: "9px",
      letterSpacing: "0.2em",
      color: "#555",
      fontFamily: "monospace",
      textTransform: "uppercase",
      marginBottom: "2px",
      textAlign: r === "user" ? "right" : "left"
    }),
    inputRow: {
      display: "flex",
      gap: "8px"
    },
    input: {
      flex: 1,
      padding: "10px 14px",
      background: "#111",
      border: "1px solid #333",
      borderRadius: "2px",
      color: "#f0ede8",
      fontFamily: "monospace",
      fontSize: "13px",
      outline: "none"
    },
    fbBox: {
      marginTop: "6px",
      padding: "10px 12px",
      background: "#0d1a0d",
      border: "1px solid #2a4a2a",
      borderRadius: "3px",
      fontFamily: "monospace",
      fontSize: "11px",
      color: "#8bc98b",
      lineHeight: "1.7",
      whiteSpace: "pre-wrap"
    },
    quizJp: {
      fontSize: "20px",
      textAlign: "center",
      padding: "24px",
      background: "#111",
      border: "1px solid #333",
      borderRadius: "3px",
      marginBottom: "16px",
      lineHeight: "1.6"
    },
    quizInput: {
      width: "100%",
      padding: "12px 16px",
      background: "#111",
      border: "1px solid #444",
      borderRadius: "2px",
      color: "#f0ede8",
      fontFamily: "monospace",
      fontSize: "14px",
      outline: "none",
      boxSizing: "border-box",
      marginBottom: "12px",
      height: "60px",
      resize: "none"
    },
    resultBox: ok => ({
      padding: "16px",
      background: ok ? "#0d1a0d" : "#1a0d0d",
      border: `1px solid ${ok ? "#3a6a3a" : "#6a3a3a"}`,
      borderRadius: "3px",
      fontFamily: "monospace",
      fontSize: "12px",
      color: ok ? "#8bc98b" : "#c98b8b",
      lineHeight: "1.7"
    }),
    transcriptBox: {
      marginTop: "10px",
      padding: "12px 14px",
      background: "#111",
      border: "1px solid #222",
      borderRadius: "3px",
      fontFamily: "monospace",
      fontSize: "12px",
      color: "#aaa"
    },
    wordCard: exp => ({
      border: `1px solid ${exp ? "#c8b89a" : "#222"}`,
      borderRadius: "3px",
      marginBottom: "8px",
      overflow: "hidden",
      cursor: "pointer",
      background: exp ? "#161410" : "#111"
    }),
    wordHeader: {
      display: "flex",
      alignItems: "center",
      justifyContent: "space-between",
      padding: "14px 16px"
    },
    wordEn: {
      fontSize: "16px",
      color: "#f0ede8"
    },
    wordBody: {
      padding: "0 16px 16px"
    },
    wordJp: {
      fontSize: "18px",
      color: "#c8b89a",
      marginBottom: "12px"
    },
    wordUsage: {
      fontSize: "12px",
      fontFamily: "monospace",
      color: "#888",
      borderLeft: "2px solid #333",
      paddingLeft: "10px",
      lineHeight: "1.6",
      marginBottom: "10px"
    },
    wordNote: {
      fontSize: "11px",
      fontFamily: "monospace",
      color: "#6a8a6a",
      lineHeight: "1.6"
    },
    flashCard: {
      minHeight: "200px",
      display: "flex",
      flexDirection: "column",
      alignItems: "center",
      justifyContent: "center",
      background: "#111",
      border: "1px solid #333",
      borderRadius: "3px",
      padding: "32px",
      marginBottom: "16px",
      textAlign: "center",
      cursor: "pointer"
    },
    flashWord: {
      fontSize: "26px",
      letterSpacing: "0.03em",
      marginBottom: "8px"
    },
    flashSub: {
      fontSize: "11px",
      fontFamily: "monospace",
      color: "#555",
      letterSpacing: "0.15em"
    },
    dot: level => ({
      display: "inline-block",
      width: "7px",
      height: "7px",
      borderRadius: "50%",
      background: MASTERY_COLOR[level],
      marginRight: "6px",
      flexShrink: 0
    }),
    masteryBadge: level => ({
      fontSize: "9px",
      fontFamily: "monospace",
      color: MASTERY_COLOR[level],
      letterSpacing: "0.1em",
      textTransform: "uppercase"
    }),
    progressBar: {
      display: "flex",
      gap: "12px",
      flexWrap: "wrap",
      marginBottom: "20px",
      padding: "14px 16px",
      background: "#111",
      border: "1px solid #222",
      borderRadius: "3px"
    },
    progressItem: {
      display: "flex",
      alignItems: "center",
      fontSize: "10px",
      fontFamily: "monospace",
      color: "#888"
    }
  };
  const renderProgressBar = (items, statsObj, keyFn) => {
    const counts = {
      new: 0,
      learning: 0,
      mastered: 0,
      struggling: 0
    };
    items.forEach((_, i) => {
      const key = keyFn(i);
      counts[masteryLevel(statsObj[key])]++;
    });
    return React.createElement("div", {
      style: S.progressBar
    }, Object.entries(counts).map(_ref => {
      let [level, count] = _ref;
      return React.createElement("div", {
        key: level,
        style: S.progressItem
      }, React.createElement("span", {
        style: S.dot(level)
      }), MASTERY_LABEL[level], "\uFF1A", count);
    }));
  };
  const renderShadowing = () => {
    const cat = SHADOWING_LESSONS[selectedCategory];
    return React.createElement("div", null, React.createElement("span", {
      style: S.label
    }, "\u30EA\u30B9\u30CB\u30F3\u30B0 & \u30B7\u30E3\u30C9\u30FC\u30A4\u30F3\u30B0\u7DF4\u7FD2"), React.createElement("div", {
      style: S.row
    }, SHADOWING_LESSONS.map((c, i) => React.createElement("button", {
      key: i,
      style: S.catBtn(selectedCategory === i),
      onClick: () => {
        setSelectedCategory(i);
        setSelectedPhrase(null);
        setTranscript("");
        setShowJp({});
        setDictWord(null);
        setDictResult(null);
      }
    }, c.category))), cat.phrases.map((p, i) => React.createElement("div", {
      key: i,
      style: S.phraseCard(selectedPhrase === i)
    }, React.createElement("div", {
      style: S.phraseEn
    }, "\"", p.en.split(/(\s+|(?=[,.'!?])|(?<=[,.'!?]))/).map((tok, ti) => /[a-zA-Z\-']+/.test(tok) ? React.createElement("span", {
      key: ti,
      onClick: () => lookupWord(tok),
      style: {
        cursor: "pointer",
        borderBottom: dictWord === tok.replace(/[^a-zA-Z\-']/g, "").toLowerCase() ? "1px solid #c8b89a" : "1px dotted #444",
        color: dictWord === tok.replace(/[^a-zA-Z\-']/g, "").toLowerCase() ? "#c8b89a" : "inherit"
      }
    }, tok) : tok), "\""), React.createElement("div", {
      style: {
        display: "flex",
        gap: "8px",
        flexWrap: "wrap"
      }
    }, React.createElement("button", {
      style: S.btn("j"),
      onClick: () => toggleJp(i, setShowJp)
    }, showJp[i] ? "\u65e5\u672c\u8a9e\u3092\u96a0\u3059" : "\u65e5\u672c\u8a9e\u3067\u78ba\u8a8d"), React.createElement("button", {
      style: S.btn("p"),
      onClick: () => {
        setSelectedPhrase(i);
        speak(p.en);
      }
    }, "\u25B6 \u518D\u751F"), React.createElement("button", {
      style: S.btn(),
      onClick: () => {
        setSelectedPhrase(i);
        speak(p.en, 0.65);
      }
    }, "\u25B6 \u30B9\u30ED\u30FC")), showJp[i] && React.createElement("div", {
      style: S.jpBox
    }, p.jp, p.note && React.createElement("div", {
      style: {
        marginTop: "6px",
        paddingTop: "6px",
        borderTop: "1px solid #2a4a2a",
        color: "#6a9a6a",
        fontSize: "10px"
      }
    }, "\uD83D\uDCA1 ", p.note)), dictWord && (selectedPhrase === i || selectedPhrase === null) && React.createElement("div", {
      style: {
        marginTop: "8px",
        padding: "10px 12px",
        background: "#0d0d1a",
        border: "1px solid #2a2a5a",
        borderRadius: "3px",
        fontFamily: "monospace",
        fontSize: "11px",
        lineHeight: "1.7"
      }
    }, React.createElement("div", {
      style: {
        color: "#a0a0e0",
        marginBottom: "4px",
        fontSize: "10px",
        letterSpacing: "0.1em"
      }
    }, "\uD83D\uDCD6 ", dictWord), dictLoading ? React.createElement("div", {
      style: {
        color: "#555"
      }
    }, "\u691C\u7D22\u4E2D...") : dictResult && React.createElement(React.Fragment, null, React.createElement("div", {
      style: {
        color: "#f0ede8",
        fontWeight: "bold"
      }
    }, dictResult.jp), dictResult.pronunciation && React.createElement("div", {
      style: {
        color: "#888"
      }
    }, dictResult.pronunciation), dictResult.note && React.createElement("div", {
      style: {
        color: "#8a8ab8",
        marginTop: "4px"
      }
    }, "\uD83D\uDCA1 ", dictResult.note), dictResult.example && React.createElement("div", {
      style: {
        color: "#666",
        marginTop: "4px",
        fontStyle: "italic"
      }
    }, "\"", dictResult.example, "\""), dictResult.usage && React.createElement("div", {
      style: {
        color: "#666",
        marginTop: "4px",
        fontStyle: "italic"
      }
    }, "\"", dictResult.usage, "\""))), selectedPhrase === i && React.createElement("div", {
      style: {
        marginTop: "12px"
      }
    }, React.createElement("div", {
      style: {
        display: "flex",
        gap: "8px",
        flexWrap: "wrap"
      }
    }, !isRecording ? React.createElement("button", {
      style: S.btn("p"),
      onClick: () => {
        setJpWarning(false);
        startRecording();
      }
    }, "\u9332\u97F3\u3057\u3066\u30B7\u30E3\u30C9\u30FC\u30A4\u30F3\u30B0") : React.createElement("button", {
      style: S.btn("r"),
      onClick: stopRecording
    }, "\u25A0 \u505C\u6B62"), audioURL && React.createElement("button", {
      style: {
        ...S.btn("p"),
        marginTop: "8px",
        width: "100%"
      },
      onClick: playRecording
    }, isPlaying ? "\u25a0 \u505c\u6b62" : "\u25b6 \u9332\u97f3\u3092\u518d\u751f"), isSpeaking && React.createElement("span", {
      style: {
        fontFamily: "monospace",
        fontSize: "10px",
        color: "#c8b89a",
        alignSelf: "center"
      }
    }, "\u25CF \u518D\u751F\u4E2D")), isRecording && interimTranscript && React.createElement("div", {
      style: {
        ...S.transcriptBox,
        marginTop: "8px",
        color: "#666",
        fontStyle: "italic"
      }
    }, React.createElement("div", {
      style: {
        fontSize: "9px",
        color: "#555",
        marginBottom: "4px",
        letterSpacing: "0.15em"
      }
    }, "\u8A8D\u8B58\u4E2D\u2026"), interimTranscript), jpWarning && React.createElement("div", {
      style: {
        marginTop: "8px",
        padding: "8px 12px",
        background: "#1a1000",
        border: "1px solid #6a4a00",
        borderRadius: "3px",
        fontFamily: "monospace",
        fontSize: "11px",
        color: "#c8a040",
        lineHeight: "1.5"
      }
    }, "\u65E5\u672C\u8A9E\u304C\u691C\u51FA\u3055\u308C\u305F\u305F\u3081\u3001\u9664\u53BB\u3057\u3066\u8868\u793A\u3057\u3066\u3044\u307E\u3059\u3002\u82F1\u8A9E\u306E\u307F\u3067\u767A\u97F3\u3057\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002"), transcript && React.createElement("div", {
      style: S.transcriptBox
    }, React.createElement("div", {
      style: {
        fontSize: "9px",
        color: "#555",
        marginBottom: "4px",
        letterSpacing: "0.15em"
      }
    }, "YOUR RECORDING"), React.createElement("div", null, transcript), React.createElement("div", {
      style: {
        marginTop: "6px",
        fontSize: "10px",
        color: "#444"
      }
    }, "\u6A21\u7BC4\uFF1A", p.en))))));
  };
  const renderVocab = () => {
    const cat = VOCAB[vocabCategory];
    const words = cat.words;
    return React.createElement("div", null, React.createElement("span", {
      style: S.label
    }, "\u5358\u8A9E\u30FB\u719F\u8A9E\u306E\u610F\u5473\u78BA\u8A8D"), React.createElement("div", {
      style: {
        display: "flex",
        gap: "8px",
        marginBottom: "16px"
      }
    }, React.createElement("button", {
      style: S.catBtn(!vocabFlipMode),
      onClick: () => {
        setVocabFlipMode(false);
        setExpandedWord(null);
      }
    }, "\u4E00\u89A7"), React.createElement("button", {
      style: S.catBtn(vocabFlipMode),
      onClick: () => {
        setVocabFlipMode(true);
        setFlashIndex(pickNextFlash(vocabCategory));
        setFlashRevealed(false);
      }
    }, "\u30D5\u30E9\u30C3\u30B7\u30E5\u30AB\u30FC\u30C9\uFF08\u9069\u5FDC\u578B\uFF09")), React.createElement("div", {
      style: S.row
    }, VOCAB.map((v, i) => React.createElement("button", {
      key: i,
      style: S.catBtn(vocabCategory === i),
      onClick: () => {
        setVocabCategory(i);
        setExpandedWord(null);
        setFlashIndex(pickNextFlash(i));
        setFlashRevealed(false);
      }
    }, v.category))), renderProgressBar(words, vocabStats, wi => `${vocabCategory}-${wi}`), !vocabFlipMode ? React.createElement("div", null, words.map((w, i) => {
      const key = `${vocabCategory}-${i}`;
      const level = masteryLevel(vocabStats[key]);
      return React.createElement("div", {
        key: i,
        style: S.wordCard(expandedWord === i),
        onClick: () => setExpandedWord(expandedWord === i ? null : i)
      }, React.createElement("div", {
        style: S.wordHeader
      }, React.createElement("div", {
        style: {
          display: "flex",
          alignItems: "center",
          gap: "10px"
        }
      }, React.createElement("span", {
        style: S.dot(level)
      }), React.createElement("div", null, React.createElement("div", {
        style: S.wordEn
      }, w.en), React.createElement("div", {
        style: S.masteryBadge(level)
      }, MASTERY_LABEL[level]))), React.createElement("button", {
        style: {
          ...S.btn("p"),
          padding: "5px 10px"
        },
        onClick: e => {
          e.stopPropagation();
          speak(w.en);
        }
      }, "\u25B6")), expandedWord === i && React.createElement("div", {
        style: S.wordBody
      }, React.createElement("div", {
        style: S.wordJp
      }, w.jp), React.createElement("div", {
        style: S.wordUsage
      }, React.createElement("div", {
        style: {
          fontSize: "9px",
          color: "#555",
          letterSpacing: "0.15em",
          marginBottom: "4px"
        }
      }, "\u7528\u4F8B"), "\"", w.usage, "\"", React.createElement("button", {
        style: {
          ...S.btn("p"),
          marginLeft: "10px",
          padding: "3px 8px",
          fontSize: "9px"
        },
        onClick: e => {
          e.stopPropagation();
          speak(w.usage);
        }
      }, "\u25B6")), React.createElement("div", {
        style: S.wordNote
      }, React.createElement("span", {
        style: {
          color: "#c8b89a",
          marginRight: "6px"
        }
      }, "Point \u2014"), w.note), React.createElement("div", {
        style: {
          display: "flex",
          gap: "8px",
          marginTop: "12px"
        }
      }, React.createElement("button", {
        style: S.btn("p"),
        onClick: async e => {
          var _vocabStats$key, _vocabStats$key2;
          e.stopPropagation();
          const next = {
            ...vocabStats,
            [key]: {
              attempts: (((_vocabStats$key = vocabStats[key]) === null || _vocabStats$key === void 0 ? void 0 : _vocabStats$key.attempts) || 0) + 1,
              correct: (((_vocabStats$key2 = vocabStats[key]) === null || _vocabStats$key2 === void 0 ? void 0 : _vocabStats$key2.correct) || 0) + 1
            }
          };
          saveVocabStats(next);
        }
      }, "\u899A\u3048\u305F"), React.createElement("button", {
        style: S.btn(),
        onClick: async e => {
          var _vocabStats$key3, _vocabStats$key4;
          e.stopPropagation();
          const next = {
            ...vocabStats,
            [key]: {
              attempts: (((_vocabStats$key3 = vocabStats[key]) === null || _vocabStats$key3 === void 0 ? void 0 : _vocabStats$key3.attempts) || 0) + 1,
              correct: ((_vocabStats$key4 = vocabStats[key]) === null || _vocabStats$key4 === void 0 ? void 0 : _vocabStats$key4.correct) || 0
            }
          };
          saveVocabStats(next);
        }
      }, "\u8981\u5FA9\u7FD2"))));
    })) : React.createElement("div", null, (() => {
      const w = words[flashIndex];
      const key = `${vocabCategory}-${flashIndex}`;
      const level = masteryLevel(vocabStats[key]);
      return React.createElement(React.Fragment, null, React.createElement("div", {
        style: {
          ...S.masteryBadge(level),
          marginBottom: "8px",
          display: "block"
        }
      }, React.createElement("span", {
        style: S.dot(level)
      }), MASTERY_LABEL[level], " \u2014 \u512A\u5148\u5EA6\u304C\u9AD8\u3044\u9806\u306B\u51FA\u984C\u3055\u308C\u3066\u3044\u307E\u3059"), React.createElement("div", {
        style: S.flashCard,
        onClick: () => setFlashRevealed(r => !r)
      }, React.createElement("div", {
        style: S.flashWord
      }, w.en), !flashRevealed ? React.createElement("div", {
        style: S.flashSub
      }, "\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u610F\u5473\u3092\u8868\u793A") : React.createElement("div", {
        style: {
          marginTop: "20px",
          textAlign: "center"
        }
      }, React.createElement("div", {
        style: {
          fontSize: "20px",
          color: "#c8b89a",
          marginBottom: "10px"
        }
      }, w.jp), React.createElement("div", {
        style: {
          fontSize: "11px",
          fontFamily: "monospace",
          color: "#6a8a6a",
          lineHeight: "1.6",
          maxWidth: "480px"
        }
      }, React.createElement("span", {
        style: {
          color: "#c8b89a"
        }
      }, "Point \u2014 "), w.note))), flashRevealed && React.createElement("div", {
        style: {
          ...S.wordUsage,
          marginBottom: "16px"
        }
      }, React.createElement("div", {
        style: {
          fontSize: "9px",
          color: "#555",
          letterSpacing: "0.15em",
          marginBottom: "4px"
        }
      }, "\u7528\u4F8B"), "\"", w.usage, "\""), React.createElement("div", {
        style: {
          display: "flex",
          gap: "10px",
          flexWrap: "wrap"
        }
      }, React.createElement("button", {
        style: S.btn("p"),
        onClick: () => speak(w.en)
      }, "\u25B6 \u5358\u8A9E"), flashRevealed && React.createElement("button", {
        style: S.btn(),
        onClick: () => speak(w.usage)
      }, "\u25B6 \u7528\u4F8B"), flashRevealed && React.createElement(React.Fragment, null, React.createElement("button", {
        style: S.btn("p"),
        onClick: async () => {
          var _vocabStats$key5, _vocabStats$key6;
          const next = {
            ...vocabStats,
            [key]: {
              attempts: (((_vocabStats$key5 = vocabStats[key]) === null || _vocabStats$key5 === void 0 ? void 0 : _vocabStats$key5.attempts) || 0) + 1,
              correct: (((_vocabStats$key6 = vocabStats[key]) === null || _vocabStats$key6 === void 0 ? void 0 : _vocabStats$key6.correct) || 0) + 1
            }
          };
          saveVocabStats(next);
          setFlashIndex(pickNextFlash(vocabCategory, next));
          setFlashRevealed(false);
        }
      }, "\u899A\u3048\u305F \u2192 \u6B21\u3078"), React.createElement("button", {
        style: S.btn(),
        onClick: async () => {
          var _vocabStats$key7, _vocabStats$key8;
          const next = {
            ...vocabStats,
            [key]: {
              attempts: (((_vocabStats$key7 = vocabStats[key]) === null || _vocabStats$key7 === void 0 ? void 0 : _vocabStats$key7.attempts) || 0) + 1,
              correct: ((_vocabStats$key8 = vocabStats[key]) === null || _vocabStats$key8 === void 0 ? void 0 : _vocabStats$key8.correct) || 0
            }
          };
          saveVocabStats(next);
          setFlashIndex(pickNextFlash(vocabCategory, next));
          setFlashRevealed(false);
        }
      }, "\u8981\u5FA9\u7FD2 \u2192 \u6B21\u3078")), !flashRevealed && React.createElement("button", {
        style: S.btn(),
        onClick: () => {
          setFlashIndex(pickNextFlash(vocabCategory));
          setFlashRevealed(false);
        }
      }, "\u30B9\u30AD\u30C3\u30D7 \u2192")));
    })()));
  };
  const renderKnowledge = () => React.createElement("div", null, React.createElement("span", {
    style: S.label
  }, "MYKITA\u30D6\u30E9\u30F3\u30C9\u30CA\u30EC\u30C3\u30B8"), React.createElement("div", {
    style: S.row
  }, ["collections", "origin", "philosophy"].map(sec => React.createElement("button", {
    key: sec,
    style: S.catBtn(knowledgeSection === sec),
    onClick: () => setKnowledgeSection(sec)
  }, sec))), knowledgeSection !== "collections" && (() => {
    const data = BRAND_KNOWLEDGE[knowledgeSection];
    return React.createElement("div", null, React.createElement("div", {
      style: S.card
    }, React.createElement("div", {
      style: {
        ...S.cName,
        marginBottom: "10px"
      }
    }, data.title), React.createElement("p", {
      style: {
        fontSize: "13px",
        lineHeight: "1.7",
        color: "#bbb",
        margin: 0
      }
    }, data.content)), React.createElement("div", {
      style: S.card
    }, React.createElement("div", {
      style: S.cName
    }, "\u63A5\u5BA2\u82F1\u8A9E\u30D5\u30EC\u30FC\u30BA"), data.keyPhrases.map((kp, i) => {
      const k = `${knowledgeSection}-${i}`;
      return React.createElement("div", {
        key: i,
        style: {
          borderBottom: "1px solid #1a1a1a",
          paddingBottom: "12px",
          marginBottom: "12px"
        }
      }, React.createElement("div", {
        style: {
          fontSize: "14px",
          color: "#c8b89a",
          fontFamily: "monospace",
          marginBottom: "6px"
        }
      }, "\"", kp.en, "\""), React.createElement("div", {
        style: {
          display: "flex",
          gap: "8px"
        }
      }, React.createElement("button", {
        style: S.btn("p"),
        onClick: () => speak(kp.en)
      }, "\u25B6 \u518D\u751F"), React.createElement("button", {
        style: S.btn("j"),
        onClick: () => toggleJp(k, setShowKpJp)
      }, showKpJp[k] ? "\u65e5\u672c\u8a9e\u3092\u96a0\u3059" : "\u65e5\u672c\u8a9e\u3067\u78ba\u8a8d")), showKpJp[k] && React.createElement("div", {
        style: S.jpBox
      }, kp.jp));
    })));
  })(), knowledgeSection === "collections" && React.createElement("div", {
    style: S.collectionGrid
  }, BRAND_KNOWLEDGE.collections.map((c, i) => React.createElement("div", {
    key: i,
    style: S.card
  }, React.createElement("div", {
    style: S.cName
  }, c.name), React.createElement("div", {
    style: S.cDesc
  }, c.description), React.createElement("div", {
    style: S.salesPt
  }, c.salesPoint), React.createElement("div", {
    style: {
      display: "flex",
      gap: "8px",
      marginTop: "12px",
      flexWrap: "wrap"
    }
  }, React.createElement("button", {
    style: S.btn("p"),
    onClick: () => speak(c.salesPoint)
  }, "\u25B6 \u30BB\u30FC\u30EB\u30B9\u30C8\u30FC\u30AF"), React.createElement("button", {
    style: S.btn("j"),
    onClick: () => toggleJp(i, setShowSalesJp)
  }, showSalesJp[i] ? "\u65e5\u672c\u8a9e\u3092\u96a0\u3059" : "\u65e5\u672c\u8a9e\u3067\u78ba\u8a8d")), showSalesJp[i] && React.createElement("div", {
    style: S.jpBox
  }, c.salesPointJp)))));
  const renderRoleplay = () => React.createElement("div", null, React.createElement("span", {
    style: S.label
  }, "AI\u30ED\u30FC\u30EB\u30D7\u30EC\u30A4 \u2014 \u3042\u306A\u305F\u304C\u8CA9\u58F2\u54E1"), React.createElement("div", {
    style: S.row
  }, [{
    key: "general",
    label: "\u4e00\u822c\u5ba2"
  }, {
    key: "mykita",
    label: "MYKITA\u30d5\u30a1\u30f3"
  }, {
    key: "objection",
    label: "\u4fa1\u683c\u4ea4\u6e09\u5ba2"
  }, {
    key: "tourist",
    label: "\u82f1\u8a9e\u89b3\u5149\u5ba2"
  }].map(sc => React.createElement("button", {
    key: sc.key,
    style: S.catBtn(scenario === sc.key),
    onClick: () => {
      setScenario(sc.key);
      resetChat();
    }
  }, sc.label))), React.createElement("div", {
    style: S.chatBox
  }, messages.map((m, i) => React.createElement("div", {
    key: i
  }, React.createElement("div", {
    style: S.roleLabel(m.role)
  }, m.role === "user" ? "\u3042\u306a\u305f\uff08\u8ca9\u58f2\u54e1\uff09" : "Customer"), React.createElement("div", {
    style: S.bubble(m.role)
  }, React.createElement("div", {
    style: S.bubbleIn(m.role)
  }, m.content)), m.role === "user" && React.createElement("div", {
    style: {
      textAlign: "right",
      marginTop: "-4px",
      marginBottom: "10px"
    }
  }, React.createElement("button", {
    style: S.btn("j"),
    onClick: () => getFeedback(i, m.content),
    disabled: loadingFeedback === i
  }, loadingFeedback === i ? "\u8a55\u4fa1\u4e2d\u2026" : "\u65e5\u672c\u8a9e\u3067\u8a55\u4fa1\u3059\u308b"), jpFeedback[i] && React.createElement("div", {
    style: S.fbBox
  }, jpFeedback[i])))), isLoading && React.createElement("div", null, React.createElement("div", {
    style: S.roleLabel("assistant")
  }, "Customer"), React.createElement("div", {
    style: S.bubble("assistant")
  }, React.createElement("div", {
    style: {
      ...S.bubbleIn("assistant"),
      color: "#555"
    }
  }, "typing\u2026"))), React.createElement("div", {
    ref: chatEndRef
  })), React.createElement("div", {
    style: S.inputRow
  }, React.createElement("input", {
    style: S.input,
    value: userInput,
    onChange: e => setUserInput(e.target.value),
    onKeyDown: e => e.key === "Enter" && sendMessage(),
    placeholder: "\u82F1\u8A9E\u3067\u8FD4\u7B54\u3057\u3066\u304F\u3060\u3055\u3044\u2026"
  }), React.createElement("button", {
    style: S.btn("p"),
    onClick: sendMessage,
    disabled: isLoading
  }, "\u9001\u4FE1"), React.createElement("button", {
    style: S.btn(),
    onClick: resetChat
  }, "\u30EA\u30BB\u30C3\u30C8")));
  const renderQuiz = () => {
    if (currentQuizIndex === null) return React.createElement("div", {
      style: {
        fontFamily: "monospace",
        color: "#555"
      }
    }, "\u8AAD\u307F\u8FBC\u307F\u4E2D\u2026");
    const q = QUIZ_QUESTIONS[currentQuizIndex];
    const stat = quizStats[q.id] || {
      attempts: 0,
      correct: 0
    };
    const level = masteryLevel(stat);
    const masteredCount = QUIZ_QUESTIONS.filter(q2 => masteryLevel(quizStats[q2.id] || {
      attempts: 0,
      correct: 0
    }) === "mastered").length;
    const learningCount = QUIZ_QUESTIONS.filter(q2 => masteryLevel(quizStats[q2.id] || {
      attempts: 0,
      correct: 0
    }) === "learning").length;
    return React.createElement("div", null, React.createElement("span", {
      style: S.label
    }, "\u65E5\u672C\u8A9E \u2192 \u82F1\u8A9E \u5909\u63DB\u30AF\u30A4\u30BA\uFF08\u9069\u5FDC\u578B\uFF09"), renderProgressBar(QUIZ_QUESTIONS, quizStats, i => QUIZ_QUESTIONS[i].id), React.createElement("div", {
      style: {
        display: "flex",
        gap: "12px",
        alignItems: "center",
        marginBottom: "14px",
        fontFamily: "monospace",
        fontSize: "10px",
        color: "#666"
      }
    }, React.createElement("span", null, "\u5168", QUIZ_QUESTIONS.length, "\u554F"), React.createElement("span", {
      style: {
        color: MASTERY_COLOR[level]
      }
    }, React.createElement("span", {
      style: S.dot(level)
    }), "\u3053\u306E\u554F\u984C\uFF1A", MASTERY_LABEL[level], stat.attempts > 0 && ` (${stat.correct}/${stat.attempts})`), React.createElement("span", {
      style: {
        color: "#4a8a4a"
      }
    }, "\u7FD2\u5F97\u6E08\uFF1A", masteredCount)), React.createElement("div", {
      style: S.quizJp
    }, q.jp), React.createElement("textarea", {
      style: S.quizInput,
      value: quizInput,
      onChange: e => setQuizInput(e.target.value),
      placeholder: "\u82F1\u8A9E\u306B\u8A33\u3057\u3066\u304F\u3060\u3055\u3044\u2026",
      disabled: !!quizResult && !quizResult.loading
    }), React.createElement("div", {
      style: {
        display: "flex",
        gap: "10px",
        flexWrap: "wrap",
        marginBottom: "14px"
      }
    }, !quizResult ? React.createElement(React.Fragment, null, React.createElement("button", {
      style: S.btn("p"),
      onClick: checkQuiz,
      disabled: !quizInput.trim()
    }, "AI\u306B\u63A1\u70B9\u3057\u3066\u3082\u3089\u3046"), React.createElement("button", {
      style: S.btn("j"),
      onClick: () => setShowHint(!showHint)
    }, showHint ? "\u30d2\u30f3\u30c8\u3092\u96a0\u3059" : "\u30d2\u30f3\u30c8\u3092\u898b\u308b"), React.createElement("button", {
      style: S.btn(),
      onClick: () => setShowAnswer(!showAnswer)
    }, showAnswer ? "\u7b54\u3048\u3092\u96a0\u3059" : "\u7b54\u3048\u3092\u898b\u308b")) : !quizResult.loading && React.createElement(React.Fragment, null, React.createElement("button", {
      style: S.btn("p"),
      onClick: () => pickNextQuestion()
    }, "\u6B21\u306E\u554F\u984C \u2192"), React.createElement("button", {
      style: S.btn(),
      onClick: () => speak(q.answer)
    }, "\u25B6 \u6A21\u7BC4\u89E3\u7B54\u3092\u805E\u304F"))), showHint && !quizResult && React.createElement("div", {
      style: {
        ...S.jpBox,
        marginBottom: "12px"
      }
    }, "\u30D2\u30F3\u30C8\uFF1A\u300C", q.hint, "\u300D"), showAnswer && !quizResult && React.createElement("div", {
      style: {
        ...S.jpBox,
        marginBottom: "12px"
      }
    }, "\u6A21\u7BC4\u89E3\u7B54\uFF1A\u300C", q.answer, "\u300D"), (quizResult === null || quizResult === void 0 ? void 0 : quizResult.loading) && React.createElement("div", {
      style: S.resultBox(true)
    }, "AI\u304C\u63A1\u70B9\u4E2D\u2026"), quizResult && !quizResult.loading && React.createElement("div", {
      style: S.resultBox(quizResult.correct)
    }, React.createElement("div", {
      style: {
        fontSize: "14px",
        marginBottom: "8px"
      }
    }, quizResult.correct ? "\u6b63\u89e3" : "\u60dc\u3057\u3044"), React.createElement("div", null, quizResult.feedback), quizResult.naturalExample && React.createElement("div", {
      style: {
        marginTop: "10px",
        color: "#c8b89a"
      }
    }, "\u3088\u308A\u81EA\u7136\u306A\u8868\u73FE\uFF1A\u300C", quizResult.naturalExample, "\u300D", React.createElement("button", {
      style: {
        ...S.btn("p"),
        marginLeft: "10px",
        padding: "4px 10px"
      },
      onClick: () => speak(quizResult.naturalExample)
    }, "\u25B6")), React.createElement("div", {
      style: {
        marginTop: "10px",
        color: "#666"
      }
    }, "\u6A21\u7BC4\u89E3\u7B54\uFF1A\u300C", q.answer, "\u300D")));
  };
  return React.createElement("div", {
    style: S.app
  }, React.createElement("div", {
    style: S.header
  }, React.createElement("div", {
    style: S.logo
  }, "MYKITA \xD7 ENGLISH TRAINING"), React.createElement("h1", {
    style: S.title
  }, "Eyewear Sales English"), React.createElement("div", {
    style: S.tabs
  }, [["shadowing", "Shadowing"], ["vocab", "Vocabulary"], ["knowledge", "Brand Knowledge"], ["roleplay", "Roleplay"], ["quiz", "Adaptive Quiz"]].map(_ref2 => {
    let [k, l] = _ref2;
    return React.createElement("button", {
      key: k,
      style: S.tab(activeTab === k),
      onClick: () => setActiveTab(k)
    }, l);
  }))), React.createElement("div", {
    style: S.main
  }, activeTab === "shadowing" && renderShadowing(), activeTab === "vocab" && renderVocab(), activeTab === "knowledge" && renderKnowledge(), activeTab === "roleplay" && renderRoleplay(), activeTab === "quiz" && renderQuiz()));
}
ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(MYKITAEnglishApp));
  </script>
</body>
</html>